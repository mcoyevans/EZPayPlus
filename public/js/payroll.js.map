{"version":3,"sources":["payroll.module.js","controllers/payroll-content-container.controller.js","controllers/payroll-entry-content-container-controller.js","controllers/payroll-process-content-container.controller.js","controllers/thirteenth-month-pay-process-content-container.controller.js","controllers/dialogs/payroll-entry-dialog.controller.js","controllers/dialogs/payroll-process-dialog.controller.js","controllers/dialogs/thirteenth-month-pay-entry-dialog.controller.js","controllers/dialogs/thirteenth-month-pay-process-dialog.controller.js","controllers/subheaders/payroll-subheader.controller.js","controllers/toolbars/payroll-entry-toolbar.controller.js","controllers/toolbars/payroll-process-toolbar.controller.js","controllers/toolbars/payroll-toolbar.controller.js","controllers/toolbars/thirteenth-month-pay-process-toolbar.controller.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC34BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"payroll.js","sourcesContent":["var payroll = angular.module('payroll', []);","payroll\r\n\t.controller('payrollContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\r\n\t\t$scope.subheader.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.subheader.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\t\t\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t/* Action originates from subheader */\r\n\t\t$scope.$on('setInit', function(){\r\n\t\t\tvar current = Helper.fetch();\r\n\r\n\t\t\t$scope.subheader.current = current;\r\n\t\t\t$scope.isLoading = true;\r\n\t\t\t$scope.init(current);\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.showInactive = false;\r\n\r\n\t\t\t$scope.view = function(data){\r\n\t\t\t\t$scope.subheader.current.view(data);\r\n\t\t\t}\r\n\r\n\t\t\t$scope.edit = function(data){\r\n\t\t\t\t$scope.subheader.current.menu[0].action(data);\r\n\t\t\t}\r\n\r\n\t\t\t$scope.delete = function(data){\r\n\t\t\t\t$scope.subheader.current.menu[1].action(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.subheader.current.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.showInactive = true;\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.subheader.current.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tif($scope.subheader.current.label == 'Payroll Processes')\r\n\t\t\t{\r\n\t\t\t\tdata.payroll_period.start_cut_off = new Date(data.payroll_period.start_cut_off);\r\n\t\t\t\tdata.payroll_period.end_cut_off = new Date(data.payroll_period.end_cut_off);\r\n\t\t\t\tdata.payroll_period.payout = new Date(data.payroll_period.payout);\r\n\t\t\t}\r\n\t\t\telse if($scope.subheader.current.label == 'Thirteenth Month Pay Processes')\r\n\t\t\t{\r\n\t\t\t\tdata.start = new Date(data.start);\r\n\t\t\t\tdata.end = new Date(data.end);\r\n\t\t\t\tdata.payout = new Date(data.payout);\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query, refresh){\r\n\t\t\t$scope.type = {};\r\n\t\t\t$scope.type.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.type.page = 2;\r\n\r\n\t\t\tHelper.post(query.url, query.request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.type.details = data;\r\n\t\t\t\t\t$scope.type.items = data.data;\r\n\t\t\t\t\t$scope.type.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.label = query.label;\r\n\t\t\t\t\t$scope.fab.action = function(){\r\n\t\t\t\t\t\tHelper.set(query.fab);\r\n\r\n\t\t\t\t\t\tHelper.customDialog(query.fab)\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tHelper.notify(query.fab.message);\r\n\t\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.type.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.type.busy || ($scope.type.page > $scope.type.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.type.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post(query.url + '?page=' + $scope.type.page, query.request)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.type.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.type.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.type.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t\t$scope.type.paginateLoad();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.init(query, refresh);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.type.show = false;\r\n\r\n  \t\t\t$scope.init($scope.subheader.current);\r\n\t\t};\r\n\t}]);","payroll\r\n\t.controller('payrollEntryContentContainerController', ['$scope', '$filter', '$state', '$stateParams', 'Helper', function($scope, $filter, $state, $stateParams, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\tvar payrollProcessID = $stateParams.payrollProcessID;\r\n\t\tvar payrollEntryID = $stateParams.payrollEntryID;\r\n\r\n\t\t$scope.form = {}\r\n\r\n\t\t$scope.payroll_entry = {};\r\n\t\t$scope.payroll_entry.payroll_process_id = payrollProcessID;\r\n\t\t$scope.payroll_entry.government_contributions = [];\r\n\r\n\t\t$scope.subtotal = {};\r\n\r\n\t\tif(payrollEntryID)\r\n\t\t{\r\n\t\t\t$scope.form.edit = true;\r\n\r\n\t\t\tvar query = {\r\n\t\t\t\t'with': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'employee.tax_code',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'employee.position',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'employee.time_interpretation',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'allowances.allowance_type',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'deductions.deduction',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'government_contributions',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': payrollEntryID,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'first': true,\r\n\t\t\t}\r\n\r\n\t\t\tvar payrollEntry = function(){\r\n\t\t\t\tHelper.post('/payroll-entry/enlist', query)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.payroll_entry = data;\r\n\r\n\t\t\t\t\t\t$scope.toolbar.parentState = 'Payroll Entry';\r\n\t\t\t\t\t\t$scope.toolbar.childState = $scope.payroll_entry.employee.last_name + ', ' + $scope.payroll_entry.employee.first_name;\r\n\r\n\t\t\t\t\t\t$scope.form.branch_id = $scope.payroll_entry.employee.branch_id;\r\n\t\t\t\t\t\t$scope.form.cost_center_id = $scope.payroll_entry.employee.cost_center_id;\r\n\r\n\t\t\t\t\t\t$scope.getHolidays();\r\n\t\t\t\t\t\t$scope.setEmployee(true);\r\n\t\t\t\t\t\t$scope.setMaxRegularHours();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tpayrollEntry();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-check';\r\n\t\t$scope.fab.label = 'Submit';\r\n\t\t$scope.fab.show = true;\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tif($scope.form.payrollEntryForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.form.payrollEntryForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tHelper.alert('Oops!', 'Kindly check form for errors.');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tHelper.preload();\r\n\r\n\t\t\t\tif(!payrollEntryID)\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/payroll-entry', $scope.payroll_entry)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$state.go('main.payroll-process', {'payrollProcessID': payrollProcessID});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/payroll-entry/' + $stateParams.payrollEntryID, $scope.payroll_entry)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$state.go('main.payroll-process', {'payrollProcessID': $stateParams.payrollProcessID});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.setEmployee = function(edit){\r\n\t\t\tif(!edit)\r\n\t\t\t{\r\n\t\t\t\t$scope.payroll_entry.employee_id = $scope.payroll_entry.employee.id;\r\n\t\t\t\t$scope.payroll_entry.allowances = [];\r\n\t\t\t\t$scope.payroll_entry.deductions = [];\r\n\t\t\t\t$scope.payroll_entry.additional_earnings = 0;\r\n\t\t\t\t$scope.payroll_entry.additional_deductions = 0;\r\n\r\n\t\t\t\tangular.forEach($scope.payroll_entry.employee.allowance_types, function(item, key){\r\n\t\t\t\t\tif(($scope.payroll_process.payroll_period.cut_off == 'first' && item.pivot.first_cut_off) || ($scope.payroll_process.payroll_period.cut_off == 'second' && item.pivot.second_cut_off)){\r\n\t\t\t\t\t\tvar allowance = {};\r\n\r\n\t\t\t\t\t\tallowance.name = item.name;\r\n\t\t\t\t\t\tallowance.description = item.description;\r\n\t\t\t\t\t\tallowance.amount = item.pivot.amount;\r\n\t\t\t\t\t\tallowance.employee_allowance_type_id = item.pivot.id;\r\n\r\n\t\t\t\t\t\t$scope.payroll_entry.allowances.push(allowance);\r\n\t\t\t\t\t\t$scope.payroll_entry.additional_earnings += allowance.amount;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tangular.forEach($scope.payroll_entry.employee.deduction_types, function(item, key){\r\n\t\t\t\t\tif(($scope.payroll_process.payroll_period.cut_off == 'first' && item.pivot.first_cut_off) || ($scope.payroll_process.payroll_period.cut_off == 'second' && item.pivot.second_cut_off)){\r\n\t\t\t\t\t\tvar deduction = {};\r\n\r\n\t\t\t\t\t\tdeduction.name = item.name;\r\n\t\t\t\t\t\tdeduction.description = item.description;\r\n\t\t\t\t\t\tdeduction.amount = item.pivot.amount;\r\n\t\t\t\t\t\tdeduction.employee_deduction_type_id = item.pivot.id;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$scope.payroll_entry.deductions.push(deduction);\r\n\t\t\t\t\t\t$scope.payroll_entry.additional_deductions += deduction.amount;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$scope.regularWorkingHoursPay();\r\n\t\t\t\t$scope.overtimePay();\r\n\t\t\t\t$scope.nightDifferentialPay();\r\n\t\t\t\t$scope.overtimeNightDifferentialPay();\r\n\t\t\t\t$scope.regularHolidayPay();\r\n\t\t\t\t$scope.regularHolidayOvertimePay();\r\n\t\t\t\t$scope.regularHolidayNightDifferentialPay();\r\n\t\t\t\t$scope.regularHolidayOvertimeNightDifferentialPay();\r\n\t\t\t\t$scope.specialHolidayPay();\r\n\t\t\t\t$scope.specialHolidayOvertimePay();\r\n\t\t\t\t$scope.specialHolidayNightDifferentialPay();\r\n\t\t\t\t$scope.specialHolidayOvertimeNightDifferentialPay();\r\n\t\t\t\t$scope.restDayPay();\r\n\t\t\t\t$scope.restDayOvertimePay();\r\n\t\t\t\t$scope.restDayNightDifferentialPay();\r\n\t\t\t\t$scope.restDayOvertimeNightDifferentialPay();\r\n\t\t\t\t$scope.regularHolidayRestDayPay();\r\n\t\t\t\t$scope.regularHolidayRestDayOvertimePay();\r\n\t\t\t\t$scope.regularHolidayRestDayNightDifferentialPay();\r\n\t\t\t\t$scope.regularHolidayRestDayOvertimeNightDifferentialPay();\r\n\t\t\t\t$scope.specialHolidayRestDayPay();\r\n\t\t\t\t$scope.specialHolidayRestDayOvertimePay();\r\n\t\t\t\t$scope.specialHolidayRestDayNightDifferentialPay();\r\n\t\t\t\t$scope.specialHolidayRestDayOvertimeNightDifferentialPay();\r\n\t\t\t}\r\n\r\n\t\t\tif($scope.payroll_entry.employee.time_interpretation.name == 'Monthly')\r\n\t\t\t{\r\n\t\t\t\t$scope.daily_rate = ($scope.payroll_entry.employee.basic_salary * 12) / $scope.payroll_process.payroll.working_days_per_year;\r\n\t\t\t\t$scope.hourly_rate = ($scope.payroll_entry.employee.basic_salary * 12) / $scope.payroll_process.payroll.working_days_per_year / $scope.payroll_process.payroll.working_hours_per_day;\r\n\t\t\t}\r\n\t\t\telse if($scope.payroll_entry.employee.time_interpretation.name == 'Daily') {\r\n\t\t\t\t$scope.daily_rate = $scope.payroll_entry.employee.basic_salary;\r\n\t\t\t\t$scope.hourly_rate = $scope.daily_rate / $scope.payroll_process.payroll.working_hours_per_day;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif($scope.payroll_process.payroll_period.cut_off == 'second')\r\n\t\t\t{\r\n\t\t\t\tvar previous_payroll_entry_query = {\r\n\t\t\t\t\t'with': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation': 'employee',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation': 'government_contributions',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation': 'allowances',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation': 'deductions',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'whereHas': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation': 'payroll_process.payroll_period',\r\n\t\t\t\t\t\t\t'whereMonth': {\r\n\t\t\t\t\t\t\t\t'label': 'start_cut_off',\r\n\t\t\t\t\t\t\t\t'value': new Date($scope.payroll_process.payroll_period.start_cut_off).getMonth() + 1,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t'whereYear': {\r\n\t\t\t\t\t\t\t\t'label': 'start_cut_off',\r\n\t\t\t\t\t\t\t\t'value': new Date($scope.payroll_process.payroll_period.start_cut_off).getFullYear(),\t\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label': 'cut_off',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': 'first',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'employee_id',\r\n\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t'value': $scope.payroll_entry.employee.id,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'first': true,\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar previousPayrollEntry = function(){\r\n\t\t\t\t\tHelper.post('/payroll-entry/enlist', previous_payroll_entry_query)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.previous_payroll_entry = data;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tpreviousPayrollEntry();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpreviousPayrollEntry();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.setMaxRegularHours = function(){\r\n\t\t\tvar days_worked = $scope.payroll_entry.days_absent ? $scope.payroll_entry.regular_working_days - $scope.payroll_entry.days_absent : $scope.payroll_entry.regular_working_days;\r\n\r\n\t\t\t$scope.max_regular_work_hours = days_worked * $scope.payroll_process.payroll.working_hours_per_day;\r\n\r\n\t\t\t// $scope.max_rest_day_work_hours = ($scope.max_regular_working_days - $scope.payroll_entry.regular_working_days - $scope.holidays.length) * $scope.payroll_process.payroll.working_hours_per_day;\r\n\t\t\t\r\n\t\t\t$scope.payroll_entry.absent = $scope.payroll_entry.days_absent ? $scope.payroll_entry.days_absent * $scope.daily_rate : 0;\r\n\t\t}\r\n\r\n\t\t$scope.calculateTax = function(){\r\n\t\t\tvar withholding_tax = $filter('filter')($scope.payroll_entry.government_contributions, 'Withholding Tax')[0];\r\n\t\t\t\r\n\t\t\tif($scope.payroll_entry.employee.minimum_wage_earner)\r\n\t\t\t{\r\n\t\t\t\twithholding_tax.amount = 0;\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar withholding_tax_query = {}\r\n\r\n\t\t\twithholding_tax_query.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'tax_code_id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.payroll_entry.employee.tax_code_id,\r\n\t\t\t\t},\r\n\t\t\t];\r\n\r\n\t\t\twithholding_tax_query.orderBy = {\r\n\t\t\t\t'label': 'salary',\r\n\t\t\t\t'order': 'desc',\r\n\t\t\t}\r\n\r\n\t\t\twithholding_tax_query.first = true;\r\n\r\n\t\t\tif($scope.payroll_process.payroll_period.cut_off == 'first')\r\n\t\t\t{\r\n\t\t\t\twithholding_tax_query.where.push({\r\n\t\t\t\t\t'label': 'pay_frequency',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.payroll_process.payroll.pay_frequency,\r\n\t\t\t\t});\r\n\r\n\t\t\t\twithholding_tax_query.where.push({\r\n\t\t\t\t\t'label': 'salary',\r\n\t\t\t\t\t'condition': '<=',\r\n\t\t\t\t\t'value': $scope.payroll_entry.taxable_income,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if($scope.payroll_process.payroll_period.cut_off == 'second')\r\n\t\t\t{\r\n\t\t\t\tvar first_cut_off_withholding_tax = $filter('filter')($scope.previous_payroll_entry.government_contributions, 'Withholding Tax') ? $filter('filter')($scope.previous_payroll_entry.government_contributions, 'Withholding Tax')[0] : null;\r\n\r\n\t\t\t\tvar taxable_income = $scope.previous_payroll_entry ? $scope.previous_payroll_entry.taxable_income + $scope.payroll_entry.taxable_income : $scope.payroll_entry.taxable_income;\r\n\r\n\t\t\t\twithholding_tax_query.where.push({\r\n\t\t\t\t\t'label': 'pay_frequency',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': 'monthly',\r\n\t\t\t\t});\r\n\r\n\t\t\t\twithholding_tax_query.where.push({\r\n\t\t\t\t\t'label': 'salary',\r\n\t\t\t\t\t'condition': '<=',\r\n\t\t\t\t\t'value': taxable_income,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar getTax = function(){\r\n\t\t\t\tHelper.post('/tax/enlist', withholding_tax_query)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\twithholding_tax.amount = first_cut_off_withholding_tax ? (data.tax + (taxable_income - data.salary) * data.excess) - first_cut_off_withholding_tax.pivot.amount : data.tax + ($scope.payroll_entry.taxable_income - data.salary) * data.excess;\r\n\t\t\t\t\t\t$scope.withholding_tax = withholding_tax.amount;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tgetTax();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tgetTax();\r\n\t\t}\r\n\r\n\t\t$scope.governmentContributions = function(){\r\n\t\t\tif($scope.payroll_entry.regular_working_hours)\r\n\t\t\t{\r\n\t\t\t\t$scope.payroll_entry.taxable_income = $scope.payroll_entry.regular_working_hours_pay - $scope.payroll_entry.tardy - $scope.payroll_entry.absent + $scope.payroll_entry.night_differential_pay + $scope.payroll_entry.overtime_pay + $scope.payroll_entry.overtime_night_differential_pay + $scope.payroll_entry.rest_day_pay + $scope.payroll_entry.rest_day_overtime_pay + $scope.payroll_entry.rest_day_night_differential_pay + $scope.payroll_entry.rest_day_overtime_night_differential_pay + $scope.payroll_entry.regular_holiday_pay + $scope.payroll_entry.regular_holiday_overtime_pay + $scope.payroll_entry.regular_holiday_night_differential_pay + $scope.payroll_entry.regular_holiday_overtime_night_differential_pay + $scope.payroll_entry.regular_holiday_rest_day_pay + $scope.payroll_entry.regular_holiday_rest_day_overtime_pay + $scope.payroll_entry.regular_holiday_rest_day_night_differential_pay + $scope.payroll_entry.regular_holiday_rest_day_overtime_night_differential_pay + $scope.payroll_entry.special_holiday_pay + $scope.payroll_entry.special_holiday_overtime_pay + $scope.payroll_entry.special_holiday_night_differential_pay + $scope.payroll_entry.special_holiday_overtime_night_differential_pay + $scope.payroll_entry.special_holiday_rest_day_pay + $scope.payroll_entry.special_holiday_rest_day_overtime_pay + $scope.payroll_entry.special_holiday_rest_day_night_differential_pay + $scope.payroll_entry.special_holiday_rest_day_overtime_night_differential_pay;\t\t\t\r\n\t\t\t\tvar taxable_income = $scope.payroll_entry.regular_working_hours_pay - $scope.payroll_entry.tardy - $scope.payroll_entry.absent + $scope.payroll_entry.night_differential_pay + $scope.payroll_entry.overtime_pay + $scope.payroll_entry.overtime_night_differential_pay + $scope.payroll_entry.rest_day_pay + $scope.payroll_entry.rest_day_overtime_pay + $scope.payroll_entry.rest_day_night_differential_pay + $scope.payroll_entry.rest_day_overtime_night_differential_pay + $scope.payroll_entry.regular_holiday_pay + $scope.payroll_entry.regular_holiday_overtime_pay + $scope.payroll_entry.regular_holiday_night_differential_pay + $scope.payroll_entry.regular_holiday_overtime_night_differential_pay + $scope.payroll_entry.regular_holiday_rest_day_pay + $scope.payroll_entry.regular_holiday_rest_day_overtime_pay + $scope.payroll_entry.regular_holiday_rest_day_night_differential_pay + $scope.payroll_entry.regular_holiday_rest_day_overtime_night_differential_pay + $scope.payroll_entry.special_holiday_pay + $scope.payroll_entry.special_holiday_overtime_pay + $scope.payroll_entry.special_holiday_night_differential_pay + $scope.payroll_entry.special_holiday_overtime_night_differential_pay + $scope.payroll_entry.special_holiday_rest_day_pay + $scope.payroll_entry.special_holiday_rest_day_overtime_pay + $scope.payroll_entry.special_holiday_rest_day_night_differential_pay + $scope.payroll_entry.special_holiday_rest_day_overtime_night_differential_pay;\r\n\t\t\t\t$scope.government_contribution_deduction = 0;\r\n\r\n\r\n\t\t\t\tvar sss = $filter('filter')($scope.payroll_entry.government_contributions, 'SSS')[0];\r\n\t\t\t\tvar philhealth = $filter('filter')($scope.payroll_entry.government_contributions, 'Philhealth')[0];\r\n\t\t\t\tvar pagibig = $filter('filter')($scope.payroll_entry.government_contributions, 'Pagibig')[0];\r\n\t\t\t\tvar withholding_tax = $filter('filter')($scope.payroll_entry.government_contributions, 'Withholding Tax')[0];\r\n\r\n\t\t\t\tif(sss)\r\n\t\t\t\t{\r\n\t\t\t\t\tif($scope.previous_payroll_entry)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar first_cut_off_sss = $filter('filter')($scope.previous_payroll_entry.government_contributions, 'SSS') ? $filter('filter')($scope.previous_payroll_entry.government_contributions, 'SSS')[0] : null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar sss_query = {}\r\n\r\n\t\t\t\t\tsss_query.where = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'from',\r\n\t\t\t\t\t\t\t'condition': '<=',\r\n\t\t\t\t\t\t\t'value': $scope.previous_payroll_entry ? $scope.previous_payroll_entry.taxable_income + taxable_income : taxable_income,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tsss_query.orderBy = {\r\n\t\t\t\t\t\t'label': 'from',\r\n\t\t\t\t\t\t'order': 'desc',\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsss_query.first = true;\r\n\r\n\t\t\t\t\tvar getSSS = function(){\r\n\t\t\t\t\t\tHelper.post('/sss/enlist', sss_query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\tsss.amount = first_cut_off_sss ? data.EE - first_cut_off_sss.amount : data.EE;\r\n\t\t\t\t\t\t\t\t$scope.payroll_entry.taxable_income -= sss.amount;\r\n\t\t\t\t\t\t\t\t$scope.government_contribution_deduction += sss.amount;\r\n\r\n\t\t\t\t\t\t\t\tif(withholding_tax){\r\n\t\t\t\t\t\t\t\t\t$scope.calculateTax();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t\tgetSSS();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgetSSS();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pagibig)\r\n\t\t\t\t{\r\n\t\t\t\t\tif($scope.previous_payroll_entry)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar first_cut_off_pagibig = $filter('filter')($scope.previous_payroll_entry.government_contributions, 'Pagibig') ? $filter('filter')($scope.previous_payroll_entry.government_contributions, 'Pagibig')[0] : null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpagibig.amount = first_cut_off_pagibig ? 100 - first_cut_off_pagibig.amount : 100;\r\n\t\t\t\t\t$scope.payroll_entry.taxable_income -= pagibig.amount;\r\n\t\t\t\t\t$scope.government_contribution_deduction += pagibig.amount;\r\n\r\n\r\n\t\t\t\t\tif(withholding_tax){\r\n\t\t\t\t\t\t$scope.calculateTax();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(philhealth)\r\n\t\t\t\t{\r\n\t\t\t\t\tif($scope.previous_payroll_entry)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar first_cut_off_philhealth = $filter('filter')($scope.previous_payroll_entry.government_contributions, 'Philhealth') ? $filter('filter')($scope.previous_payroll_entry.government_contributions, 'Philhealth')[0] : null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar philhealth_query = {}\r\n\r\n\t\t\t\t\tphilhealth_query.where = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'from',\r\n\t\t\t\t\t\t\t'condition': '<=',\r\n\t\t\t\t\t\t\t'value': $scope.previous_payroll_entry ? $scope.previous_payroll_entry.taxable_income + taxable_income : taxable_income,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tphilhealth_query.orderBy = {\r\n\t\t\t\t\t\t'label': 'from',\r\n\t\t\t\t\t\t'order': 'desc',\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tphilhealth_query.first = true;\r\n\r\n\t\t\t\t\tHelper.post('/philhealth/enlist', philhealth_query)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\tphilhealth.amount = first_cut_off_philhealth ? data.employee_share - first_cut_off_philhealth.amount : data.employee_share;\r\n\t\t\t\t\t\t\t$scope.payroll_entry.taxable_income -= philhealth.amount;\r\n\t\t\t\t\t\t\t$scope.government_contribution_deduction += philhealth.amount;\r\n\t\t\t\t\t\t\tif(withholding_tax){\r\n\t\t\t\t\t\t\t\t$scope.calculateTax();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(withholding_tax){\r\n\t\t\t\t\t$scope.calculateTax();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Calculating\r\n\t\t$scope.regularWorkingHoursPay = function(){\r\n\t\t\tif($scope.payroll_process.payroll.time_interpretation.name == 'Monthly')\r\n\t\t\t{\r\n\t\t\t\t$scope.payroll_entry.regular_working_hours_pay = $scope.payroll_entry.regular_working_hours ? $scope.payroll_entry.employee.basic_salary / $scope.basic_pay_factor : null;\r\n\t\t\t}\r\n\t\t\telse if($scope.payroll_process.payroll.time_interpretation.name == 'Daily')\r\n\t\t\t{\r\n\t\t\t\t$scope.payroll_entry.regular_working_hours_pay = $scope.payroll_entry.regular_working_hours ? $scope.payroll_entry.regular_working_hours * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_working_hours : null;\r\n\t\t\t}\r\n\r\n\t\t\t$scope.payroll_entry.hours_tardy = $scope.max_regular_work_hours - $scope.payroll_entry.regular_working_hours;\r\n\t\t\t$scope.payroll_entry.tardy = $scope.payroll_entry.hours_tardy * $scope.hourly_rate;\r\n\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.overtimePay = function(){\r\n\t\t\t$scope.payroll_entry.overtime_pay = $scope.payroll_entry.overtime ? $scope.payroll_entry.overtime * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.overtime : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.nightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.night_differential_pay = $scope.payroll_entry.night_differential ? $scope.payroll_entry.night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.overtimeNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.overtime_night_differential_pay = $scope.payroll_entry.overtime_night_differential ? $scope.hourly_rate * $scope.payroll_entry.overtime_night_differential * $scope.payroll_process.payroll.time_interpretation.overtime_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayPay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_pay = \t$scope.payroll_entry.regular_holiday ? $scope.payroll_entry.regular_holiday * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_rate : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayOvertimePay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_overtime_pay = $scope.payroll_entry.regular_holiday_overtime ? $scope.payroll_entry.regular_holiday_overtime * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_overtime : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_night_differential_pay = $scope.payroll_entry.regular_holiday_night_differential ? $scope.payroll_entry.regular_holiday_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayOvertimeNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_overtime_night_differential_pay = $scope.payroll_entry.regular_holiday_overtime_night_differential ? $scope.payroll_entry.regular_holiday_overtime_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_overtime_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayPay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_pay = \t$scope.payroll_entry.special_holiday ? $scope.payroll_entry.special_holiday * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_rate : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayOvertimePay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_overtime_pay = $scope.payroll_entry.special_holiday_overtime ? $scope.payroll_entry.special_holiday_overtime * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_overtime : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_night_differential_pay = $scope.payroll_entry.special_holiday_night_differential ? $scope.payroll_entry.special_holiday_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayOvertimeNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_overtime_night_differential_pay = $scope.payroll_entry.special_holiday_overtime_night_differential ? $scope.payroll_entry.special_holiday_overtime_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_overtime_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.restDayPay = function(){\r\n\t\t\t$scope.payroll_entry.rest_day_pay = $scope.payroll_entry.rest_day ? $scope.payroll_entry.rest_day * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.rest_day_rate : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.restDayOvertimePay = function(){\r\n\t\t\t$scope.payroll_entry.rest_day_overtime_pay = $scope.payroll_entry.rest_day_overtime ? $scope.payroll_entry.rest_day_overtime * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.rest_day_overtime : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.restDayNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.rest_day_night_differential_pay = $scope.payroll_entry.rest_day_night_differential ? $scope.payroll_entry.rest_day_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.rest_day_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.restDayOvertimeNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.rest_day_overtime_night_differential_pay = $scope.payroll_entry.rest_day_overtime_night_differential ? $scope.payroll_entry.rest_day_overtime_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.rest_day_overtime_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayRestDayPay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_rest_day_pay = $scope.payroll_entry.regular_holiday_rest_day ? $scope.payroll_entry.regular_holiday_rest_day * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_rest_day_rate : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayRestDayOvertimePay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_rest_day_overtime_pay = $scope.payroll_entry.regular_holiday_rest_day_overtime ? $scope.payroll_entry.regular_holiday_rest_day_overtime * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_rest_day_overtime : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayRestDayNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_rest_day_night_differential_pay = $scope.payroll_entry.regular_holiday_rest_day_night_differential ? $scope.payroll_entry.regular_holiday_rest_day_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_rest_day_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.regularHolidayRestDayOvertimeNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.regular_holiday_rest_day_overtime_night_differential_pay = $scope.payroll_entry.regular_holiday_rest_day_overtime_night_differential ? $scope.payroll_entry.regular_holiday_rest_day_overtime_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.regular_holiday_rest_day_overtime_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayRestDayPay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_rest_day_pay = $scope.payroll_entry.special_holiday_rest_day ? $scope.payroll_entry.special_holiday_rest_day * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_rest_day_rate : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayRestDayOvertimePay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_rest_day_overtime_pay = $scope.payroll_entry.special_holiday_rest_day_overtime ? $scope.payroll_entry.special_holiday_rest_day_overtime * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_rest_day_overtime : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayRestDayNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_rest_day_night_differential_pay = $scope.payroll_entry.special_holiday_rest_day_night_differential ? $scope.payroll_entry.special_holiday_rest_day_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_rest_day_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.specialHolidayRestDayOvertimeNightDifferentialPay = function(){\r\n\t\t\t$scope.payroll_entry.special_holiday_rest_day_overtime_night_differential_pay = $scope.payroll_entry.special_holiday_rest_day_overtime_night_differential ? $scope.payroll_entry.special_holiday_rest_day_overtime_night_differential * $scope.hourly_rate * $scope.payroll_process.payroll.time_interpretation.special_holiday_rest_day_overtime_night_differential : null;\r\n\t\t\t$scope.governmentContributions();\r\n\t\t}\r\n\r\n\t\t$scope.getHolidays = function(){\r\n\t\t\tif(!payrollEntryID)\r\n\t\t\t{\r\n\t\t\t\t$scope.payroll_entry.employee = null;\r\n\t\t\t}\r\n\r\n\t\t\tvar holiday_query = {\r\n\t\t\t\t'whereMonth': \r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'date',\r\n\t\t\t\t\t'value': new Date($scope.payroll_process.payroll_period.start_cut_off).getMonth() + 1,\r\n\t\t\t\t},\r\n\t\t\t\t'whereBetweenDay': \r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'date',\r\n\t\t\t\t\t'start': new Date($scope.payroll_process.payroll_period.start_cut_off).getDate(),\r\n\t\t\t\t\t'end': new Date($scope.payroll_process.payroll_period.end_cut_off).getDate(),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\t\tholiday_query.whereHas = [];\r\n\r\n\t\t\tif($scope.form.branch_id)\r\n\t\t\t{\r\n\t\t\t\tholiday_query.whereHas.push(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'branches',\r\n\t\t\t\t\t\t'where': {\r\n\t\t\t\t\t\t\t'label': 'branch_id',\r\n\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t'value': $scope.form.branch_id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\tif($scope.form.cost_center_id)\r\n\t\t\t{\r\n\t\t\t\tholiday_query.whereHas.push(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'cost_centers',\r\n\t\t\t\t\t\t'where': {\r\n\t\t\t\t\t\t\t'label': 'cost_center_id',\r\n\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t'value': $scope.form.cost_center_id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/holiday/enlist', holiday_query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.regular_holidays = [];\r\n\t\t\t\t\t$scope.special_holidays = [];\r\n\r\n\t\t\t\t\tif(data.length)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tangular.forEach(data, function(item){\r\n\t\t\t\t\t\t\titem.date = new Date(item.date);\r\n\r\n\t\t\t\t\t\t\tif(item.type == 'Regular Holiday'){\r\n\t\t\t\t\t\t\t\t$scope.regular_holidays.push(item)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(item.type == 'Special Non-Working Holiday')\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t$scope.special_holidays.push(item)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t$scope.holidays = data;\r\n\r\n\t\t\t\t\t$scope.max_regular_holiday_regular_hours = $scope.regular_holidays ? $scope.regular_holidays.length * $scope.payroll_process.payroll.working_hours_per_day : 0;\r\n\t\t\t\t\t$scope.max_special_holiday_regular_hours = $scope.regular_holidays ? $scope.special_holidays.length * $scope.payroll_process.payroll.working_hours_per_day : 0;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\tgetHolidays();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\tvar branches = function(){\r\n\t\t\t\tHelper.get('/branch')\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.branches = data;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tbranches();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tvar costCenters = function(){\r\n\t\t\t\tHelper.get('/cost-center')\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.cost_centers = data;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tcostCenters();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t})\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar payroll_process_query = {\r\n\t\t\t\t'with': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'batch',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'payroll.time_interpretation',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'payroll.government_contributions',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'payroll_period',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': payrollProcessID,\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t'first': true,\r\n\t\t\t}\r\n\r\n\t\t\tvar payrollProcess = function(){\r\n\t\t\t\tHelper.post('/payroll-process/enlist', payroll_process_query)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tdata.payroll_period.start_cut_off = new Date(data.payroll_period.start_cut_off);\r\n\t\t\t\t\t\tdata.payroll_period.end_cut_off = new Date(data.payroll_period.end_cut_off);\r\n\t\t\t\t\t\tdata.payroll_period.payout = new Date(data.payroll_period.payout);\r\n\r\n\t\t\t\t\t\tvar timeDiff = Math.abs(data.payroll_period.end_cut_off.getTime() - data.payroll_period.start_cut_off.getTime());\r\n\t\t\t\t\t\t$scope.max_regular_working_days = Math.ceil(timeDiff / (1000 * 3600 * 24)) + 1;\r\n\r\n\t\t\t\t\t\tangular.forEach(data.payroll.government_contributions, function(item){\r\n\t\t\t\t\t\t\tif((data.payroll_period.cut_off == 'first' && item.first_cut_off) || (data.payroll_period.cut_off == 'second' && item.second_cut_off))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t$scope.payroll_entry.government_contributions.push(item);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$scope.payroll_process = data;\r\n\r\n\t\t\t\t\t\tif(data.payroll.pay_frequency == 'Weekly')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$scope.basic_pay_factor = 4;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(data.payroll.pay_frequency == 'Semi-monthly')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$scope.basic_pay_factor = 2;\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(data.payroll.pay_frequency == 'Monthly')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$scope.basic_pay_factor = 1;\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar employee_query = {\r\n\t\t\t\t\t\t\t'with': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation': 'allowance_types.de_minimis',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\t\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation': 'deduction_types',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation': 'tax_code',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\t\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation': 'position',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\t\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation': 'time_interpretation',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label': 'batch_id',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': $scope.payroll_process.batch_id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label': 'time_interpretation_id',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': $scope.payroll_process.payroll.time_interpretation_id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(payrollEntryID)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\temployee_query.where.push(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': payrollEntryID,\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\temployee_query.whereDoesntHave = [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation': 'payroll_entries',\r\n\t\t\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t'label': 'payroll_process_id',\r\n\t\t\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t\t\t'value': $scope.payroll_process.id,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar employees = function(){\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tHelper.post('/employee/enlist', employee_query)\r\n\t\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t\t$scope.employees = data;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t\t\temployees();\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\temployees();\r\n\r\n\t\t\t\t\t\tif(payrollEntryID)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpayrollEntry();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tpayrollProcess();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tbranches();\r\n\t\t\tcostCenters();\r\n\t\t\tpayrollProcess();\r\n\r\n\t\t}();\r\n\t}]);","payroll\r\n\t.controller('payrollProcessContentContainerController', ['$scope', '$state', '$stateParams', 'Helper', function($scope, $state, $stateParams, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\tvar payrollProcessID = $stateParams.payrollProcessID;\r\n\r\n\t\tvar query = {\r\n\t\t\t'with': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'payroll',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'payroll_period',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'where': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value' : payrollProcessID,\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t'first' : true,\r\n\t\t}\r\n\r\n\t\tHelper.post('/payroll-process/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\tif(!data)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.payroll_process = data;\r\n\r\n\t\t\t\t$scope.toolbar.parentState = data.payroll.name;\r\n\t\t\t\t$scope.toolbar.childState = new Date(data.payroll_period.start_cut_off).toDateString() + ' - ' + new Date(data.payroll_period.end_cut_off).toDateString();\r\n\r\n\t\t\t\tif($scope.payroll_process.locked && !$scope.payroll_process.processed)\r\n\t\t\t\t{\r\n\t\t\t\t\t$scope.subheader.menu.push(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'Process Payroll',\r\n\t\t\t\t\t\t\t'icon': 'mdi-comment-processing',\r\n\t\t\t\t\t\t\taction: function(){\r\n\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\telse if(!$scope.payroll_process.locked && !$scope.payroll_process.processed){\r\n\t\t\t\t\t$scope.subheader.menu.push(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'Lock Payroll',\r\n\t\t\t\t\t\t\t'icon': 'mdi-lock',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\tvar dialog = {}\r\n\r\n\t\t\t\t\t\t\t\tdialog.title = 'Lock Payroll'\r\n\t\t\t\t\t\t\t\tdialog.message = 'Adding or editing payroll entries will be disabled upon locking this payroll process.'\r\n\t\t\t\t\t\t\t\tdialog.ok = 'Lock',\r\n\t\t\t\t\t\t\t\tdialog.cancel = 'Cancel',\r\n\r\n\t\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t\tHelper.preload();\r\n\t\t\t\t\t\t\t\t\t\tHelper.post('/payroll-process/lock', $scope.payroll_process)\r\n\t\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\t\t\t\t\t\tHelper.notify('Payroll process locked.');\r\n\t\t\t\t\t\t\t\t\t\t\t\t$state.go($state.current, {}, {reload:true});\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'Process Payroll',\r\n\t\t\t\t\t\t\t'icon': 'mdi-comment-processing',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t$scope.$broadcast('close');\r\n\r\n\t\t\t\t$scope.init($scope.request);\r\n\r\n\t\t\t})\r\n\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\r\n\t\t$scope.subheader.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.subheader.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t$scope.subheader.menu = []\r\n\t\t\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Payroll Entry';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\t$state.go('main.payroll-entry', {'payrollProcessID': payrollProcessID});\r\n\t\t}\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.showInactive = true;\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.viewPayrollEntry = function(data){\r\n\t\t\tvar config = data;\r\n\r\n\t\t\tif($scope.payroll_process.locked || $scope.payroll_process.processed)\r\n\t\t\t{\r\n\t\t\t\tdata.view_only = true;\r\n\t\t\t}\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template': '/app/components/payroll/templates/dialogs/payroll-entry-dialog.template.html',\r\n\t\t\t\t'controller': 'payrollEntryDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\r\n\t\t\t\t}, function(){\r\n\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/payroll-entry/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = $scope.payroll_process.locked || $scope.payroll_process.processed ? false : true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/payroll-entry/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.paginate = 20;\r\n\r\n\t\t$scope.request.with = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'employee',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.request.where = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'payroll_process_id',\r\n\t\t\t\t'condition': '=',\r\n\t\t\t\t'value': payrollProcessID,\r\n\t\t\t},\r\n\t\t];\t\r\n\t}]);","payroll\r\n\t.controller('thirteenthMonthPayProcessContentContainerController', ['$scope', '$state', '$stateParams', 'Helper', function($scope, $state, $stateParams, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\tvar thirteenthMonthPayProcessID = $stateParams.thirteenthMonthPayProcessID;\r\n\r\n\t\tvar query = {\r\n\t\t\t'with': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'batch',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'where': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value' : thirteenthMonthPayProcessID,\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t'first' : true,\r\n\t\t}\r\n\r\n\t\tHelper.post('/thirteenth-month-pay-process/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\tif(!data)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.thirteenth_month_pay_process = data;\r\n\r\n\t\t\t\t$scope.toolbar.parentState = data.batch.name;\r\n\t\t\t\t$scope.toolbar.childState = new Date(data.start).toDateString() + ' - ' + new Date(data.end).toDateString();\r\n\r\n\t\t\t\tif($scope.thirteenth_month_pay_process.locked && !$scope.thirteenth_month_pay_process.processed)\r\n\t\t\t\t{\r\n\t\t\t\t\t$scope.subheader.menu.push(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'Process Thirteenth Month Pay',\r\n\t\t\t\t\t\t\t'icon': 'mdi-comment-processing',\r\n\t\t\t\t\t\t\taction: function(){\r\n\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\telse if(!$scope.thirteenth_month_pay_process.locked && !$scope.thirteenth_month_pay_process.processed){\r\n\t\t\t\t\t$scope.subheader.menu.push(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'Lock Thirteenth Month Pay',\r\n\t\t\t\t\t\t\t'icon': 'mdi-lock',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\tvar dialog = {}\r\n\r\n\t\t\t\t\t\t\t\tdialog.title = 'Lock Thirteenth Month Pay'\r\n\t\t\t\t\t\t\t\tdialog.message = 'Adding or editing payroll entries will be disabled upon locking this payroll process.'\r\n\t\t\t\t\t\t\t\tdialog.ok = 'Lock',\r\n\t\t\t\t\t\t\t\tdialog.cancel = 'Cancel',\r\n\r\n\t\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t\tHelper.preload();\r\n\t\t\t\t\t\t\t\t\t\tHelper.post('/thirteenth-month-pay-process/lock', $scope.thirteenth_month_pay_process)\r\n\t\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\t\t\t\t\t\tHelper.notify('Thirteenth month pay process locked.');\r\n\t\t\t\t\t\t\t\t\t\t\t\t$state.go($state.current, {}, {reload:true});\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label': 'Process Thirteenth Month Pay',\r\n\t\t\t\t\t\t\t'icon': 'mdi-comment-processing',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t$scope.$broadcast('close');\r\n\r\n\t\t\t\t$scope.init($scope.request);\r\n\r\n\t\t\t})\r\n\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\r\n\t\t$scope.subheader.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.subheader.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t$scope.subheader.menu = []\r\n\t\t\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Thirteenth Month Pay Entry';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template': '/app/components/payroll/templates/dialogs/thirteenth-month-pay-entry-form-dialog.template.html',\r\n\t\t\t\t'controller': 'thirteenthMonthPayEntryDialogController',\r\n\t\t\t}\r\n\r\n\t\t\t$scope.thirteenth_month_pay_process.action = 'create';\r\n\r\n\t\t\tHelper.set($scope.thirteenth_month_pay_process);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Thirteenth month pay entry created.');\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.showInactive = true;\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.viewThirteenthMonthPayEntry = function(data){\r\n\t\t\tvar config = data;\r\n\r\n\t\t\tif($scope.thirteenth_month_pay_process.locked || $scope.thirteenth_month_pay_process.processed)\r\n\t\t\t{\r\n\t\t\t\tdata.view_only = true;\r\n\t\t\t}\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template': '/app/components/payroll/templates/dialogs/thirteenth-month-pay-entry-dialog.template.html',\r\n\t\t\t\t'controller': 'thirteenthMonthPayEntryDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\r\n\t\t\t\t}, function(){\r\n\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/thirteenth-month-pay-entry/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = $scope.thirteenth_month_pay_process.locked || $scope.thirteenth_month_pay_process.processed ? false : true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/thirteenth-month-pay-entry/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.paginate = 20;\r\n\r\n\t\t$scope.request.with = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'employee',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.request.where = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'thirteenth_month_pay_process_id',\r\n\t\t\t\t'condition': '=',\r\n\t\t\t\t'value': thirteenthMonthPayProcessID,\r\n\t\t\t},\r\n\t\t];\r\n\t}]);","payroll\r\n\t.controller('payrollEntryDialogController', ['$scope', '$state', '$stateParams', 'Helper', function($scope, $state, $stateParams, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tvar query = {\r\n\t\t\t'with': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'employee.tax_code',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'employee.position',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'allowances.allowance_type',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'deductions.deduction',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'government_contributions',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'payroll_process',\r\n\t\t\t\t\t'withTrashed': false,\t\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t'where': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'first': true,\r\n\t\t}\r\n\r\n\t\tHelper.post('/payroll-entry/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.payroll_entry = data;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tHelper.error();\r\n\t\t\t});\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.edit = function(){\r\n\t\t\tHelper.stop();\r\n\t\t\t$state.go('main.payroll-entry', {'payrollProcessID': $scope.payroll_entry.payroll_process_id, 'payrollEntryID': $scope.payroll_entry.id});\r\n\t\t}\r\n\r\n\t\t$scope.delete = function(){\r\n\t\t\tvar confirm = {\r\n\t\t\t\t'title': 'Delete Entry',\r\n\t\t\t\t'message': 'This payroll entry will be deleted permanently.',\r\n\t\t\t\t'ok': 'Delete',\r\n\t\t\t\t'cancel': 'Cancel',\r\n\t\t\t}\r\n\r\n\t\t\tHelper.confirm(confirm)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.preload();\r\n\r\n\t\t\t\t\tHelper.delete('/payroll-entry/' + $scope.payroll_entry.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\tHelper.notify('Payroll entry deleted.');\r\n\t\t\t\t\t\t\t$state.go($state.current, {'payrollProcessID': $stateParams.payrollProcessID}, {reload: true});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\t}]);","payroll\r\n\t.controller('payrollProcessDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\t$scope.payroll_process = {};\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.fetchPayrollPeriod = function(){\r\n\t\t\t\tif($scope.payroll_process.batch_id)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar query = {\r\n\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'label': 'payroll_id',\r\n\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t'value': $scope.payroll_process.payroll_id,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t'whereDoesntHave': [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'relation':'payroll_process',\r\n\t\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'label': 'batch_id',\r\n\t\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t\t'value': $scope.payroll_process.batch_id,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t'orderBy': [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'column': 'start_cut_off',\r\n\t\t\t\t\t\t\t\t'order': 'desc',\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tHelper.post('/payroll-period/enlist', query)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\tangular.forEach(data, function(item){\r\n\t\t\t\t\t\t\t\titem.start_cut_off = new Date(item.start_cut_off);\r\n\t\t\t\t\t\t\t\titem.end_cut_off = new Date(item.end_cut_off);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t$scope.payroll_periods = data;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\t$scope.fetchPayrollPeriod = function(){\r\n\t\t\t\tif($scope.payroll_process.batch_id)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar query = {\r\n\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'label': 'payroll_id',\r\n\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t'value': $scope.payroll_process.payroll_id,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t'whereDoesntHave': [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'relation':'payroll_process',\r\n\t\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'label': 'batch_id',\r\n\t\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t\t'value': $scope.payroll_process.batch_id,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t'orWhere':[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t'value': $scope.payroll_process.id,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t'orderBy': [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'column': 'start_cut_off',\r\n\t\t\t\t\t\t\t\t'order': 'desc',\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tHelper.post('/payroll-period/enlist', query)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\tangular.forEach(data, function(item){\r\n\t\t\t\t\t\t\t\titem.start_cut_off = new Date(item.start_cut_off);\r\n\t\t\t\t\t\t\t\titem.end_cut_off = new Date(item.end_cut_off);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t$scope.payroll_periods = data;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar query = {\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'first': true,\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/payroll-process/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.payroll_process = data;\r\n\t\t\t\t\t$scope.fetchPayrollPeriod();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/payroll-process/check-duplicate', $scope.payroll_process)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.payrollProcessForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.payrollProcessForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/payroll-process', $scope.payroll_process)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/payroll-process/' + $scope.config.id, $scope.payroll_process)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tHelper.get('/payroll')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.payrolls = data;\r\n\t\t\t})\r\n\r\n\t\tHelper.get('/batch')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.batches = data;\r\n\t\t\t})\r\n\t}]);","payroll\r\n\t.controller('thirteenthMonthPayEntryDialogController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\t$scope.thirteenth_month_pay_process = Helper.fetch();\r\n\r\n\t\t$scope.thirteenth_month_pay_process.start = new Date($scope.thirteenth_month_pay_process.start);\r\n\t\t$scope.thirteenth_month_pay_process.end = new Date($scope.thirteenth_month_pay_process.end);\r\n\r\n\t\t$scope.thirteenth_month_pay_entry = {}\r\n\r\n\t\t$scope.thirteenth_month_pay_entry.thirteenth_month_pay_process_id = $scope.thirteenth_month_pay_process.id;\r\n\r\n\t\tif($scope.thirteenth_month_pay_process.action == 'create')\r\n\t\t{\r\n\r\n\t\t}\r\n\t\telse if($scope.thirteenth_month_pay_process.action == 'edit')\r\n\t\t{\r\n\r\n\t\t}\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\tvar query = {\r\n\t\t\t'where': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'batch_id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.thirteenth_month_pay_process.batch_id,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'whereDoesntHave': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'thirteen_month_pay_entries',\r\n\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t\t\t'value':$scope.thirteenth_month_pay_process.id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t}\r\n\r\n\t\tHelper.post('/employee/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.employees = data;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tHelper.error();\r\n\t\t\t})\r\n\r\n\t\t$scope.partial_amount = 0;\r\n\r\n\t\t$scope.fetchPartialAmount = function(){\r\n\t\t\t$scope.checkDuplicate();\r\n\r\n\t\t\tvar query = {\r\n\t\t\t\t'with': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'payroll_process.payroll_period',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t'whereBetween': {\r\n\t\t\t\t\t\t\t'label': 'start_cut_off',\r\n\t\t\t\t\t\t\t'start': $scope.thirteenth_month_pay_process.start.toDateString(),\r\n\t\t\t\t\t\t\t'end': $scope.thirteenth_month_pay_process.end.toDateString(),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'employee_id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $scope.thirteenth_month_pay_entry.employee.id,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/payroll-entry/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.payroll_entries = data;\r\n\t\t\t\t\t\r\n\t\t\t\t\tangular.forEach($scope.payroll_entries, function(item){\r\n\t\t\t\t\t\t$scope.partial_amount += item.partial_thirteenth_month_pay;\r\n\t\t\t\t\t\titem.payroll_process.payroll_period.start_cut_off = new Date(item.payroll_process.payroll_period.start_cut_off);\r\n\t\t\t\t\t\titem.payroll_process.payroll_period.end_cut_off = new Date(item.payroll_process.payroll_period.end_cut_off);\r\n\t\t\t\t\t\titem.payroll_process.payroll_period.payout = new Date(item.payroll_process.payroll_period.payout);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.thirteenth_month_pay_entry.net_pay = $scope.partial_amount;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tvar query = {\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'thirteenth_month_pay_process_id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $scope.thirteenth_month_pay_process.id,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'employee_id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $scope.thirteenth_month_pay_entry.employee.id,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'first': true,\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/thirteenth-month-pay-entry/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.thirteenthMonthPayEntryForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.thirteenthMonthPayEntryForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","payroll\r\n\t.controller('thirteenthMonthPayProcessDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\t$scope.thirteenth_month_pay_process = {};\r\n\r\n\t\t$scope.today = new Date();\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.thirteenth_month_pay_process.start = new Date(new Date().getFullYear(), 0, 1);\r\n\t\t\t$scope.thirteenth_month_pay_process.end = new Date(new Date().getFullYear(), 11, 31);\r\n\t\t\t$scope.thirteenth_month_pay_process.payout = new Date(new Date().getFullYear(), 11, 24);\r\n\t\t}\r\n\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tvar query = {\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'first': true,\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/thirteenth-month-pay-process/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.thirteenth_month_pay_process = data;\r\n\r\n\t\t\t\t\t$scope.thirteenth_month_pay_process.start = new Date($scope.thirteenth_month_pay_process.start);\r\n\t\t\t\t\t$scope.thirteenth_month_pay_process.end = new Date($scope.thirteenth_month_pay_process.end);\r\n\t\t\t\t\t$scope.thirteenth_month_pay_process.payout = new Date($scope.thirteenth_month_pay_process.payout);\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(date){\r\n\t\t\tif(date == 'start')\r\n\t\t\t{\r\n\t\t\t\tif($scope.thirteenth_month_pay_process.start > $scope.thirteenth_month_pay_process.end)\r\n\t\t\t\t{\r\n\t\t\t\t\t$scope.thirteenth_month_pay_process.end = new Date($scope.thirteenth_month_pay_process.start);\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(date == 'end')\r\n\t\t\t{\r\n\t\t\t\tif($scope.thirteenth_month_pay_process.end > $scope.thirteenth_month_pay_process.payout)\r\n\t\t\t\t{\r\n\t\t\t\t\t$scope.thirteenth_month_pay_process.payout = new Date($scope.thirteenth_month_pay_process.end);\t\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\r\n\t\t\tvar query = {\r\n\t\t\t\t'id': $scope.thirteenth_month_pay_process.id,\r\n\t\t\t\t'batch_id': $scope.thirteenth_month_pay_process.batch_id,\r\n\t\t\t\t'start': $scope.thirteenth_month_pay_process.start.toDateString(),\r\n\t\t\t\t'end': $scope.thirteenth_month_pay_process.end.toDateString(),\r\n\t\t\t\t'payout': $scope.thirteenth_month_pay_process.payout.toDateString(),\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/thirteenth-month-pay-process/check-duplicate', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar convertDates = function(){\r\n\t\t\t$scope.thirteenth_month_pay_process.start = new Date($scope.thirteenth_month_pay_process.start);\r\n\t\t\t$scope.thirteenth_month_pay_process.end = new Date($scope.thirteenth_month_pay_process.end);\r\n\t\t\t$scope.thirteenth_month_pay_process.payout = new Date($scope.thirteenth_month_pay_process.payout);\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.thirteenthMonthPayProcessForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.thirteenthMonthPayProcessForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\t$scope.thirteenth_month_pay_process.start = $scope.thirteenth_month_pay_process.start.toDateString();\r\n\t\t\t\t$scope.thirteenth_month_pay_process.end = $scope.thirteenth_month_pay_process.end.toDateString();\r\n\t\t\t\t$scope.thirteenth_month_pay_process.payout = $scope.thirteenth_month_pay_process.payout.toDateString();\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/thirteenth-month-pay-process', $scope.thirteenth_month_pay_process)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\tconvertDates();\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tconvertDates();\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/thirteenth-month-pay-process/' + $scope.config.id, $scope.thirteenth_month_pay_process)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\tconvertDates();\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tconvertDates();\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tHelper.get('/batch')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.batches = data;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tHelper.error();\r\n\t\t\t})\r\n\t}]);","payroll\r\n\t.controller('payrollSubheaderController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\tvar setInit = function(data){\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\t$scope.$emit('setInit');\r\n\t\t}\r\n\r\n\t\t$scope.subheader.navs = [\r\n\t\t\t// Payroll Process\r\n\t\t\t{\r\n\t\t\t\t'label':'Payroll Processes',\r\n\t\t\t\t'url': '/payroll-process/enlist',\r\n\t\t\t\t'request' : {\r\n\t\t\t\t\t'with' : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation':'batch',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation':'payroll',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation':'payroll_period',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'paginate':20,\r\n\t\t\t\t},\r\n\t\t\t\t'fab': {\r\n\t\t\t\t\t'fullscreen' : true,\r\n\t\t\t\t\t'controller':'payrollProcessDialogController',\r\n\t\t\t\t\t'template':'/app/components/payroll/templates/dialogs/payroll-process-form-dialog.template.html',\r\n\t\t\t\t\t'message': 'Payroll process saved.',\r\n\t\t\t\t\t'action' : 'create',\r\n\t\t\t\t\t'fullscreen' : true,\r\n\t\t\t\t\t'url': '/payroll-process',\r\n\t\t\t\t\t'label': 'Payroll process',\r\n\t\t\t\t},\r\n\t\t\t\t'menu': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Edit',\r\n\t\t\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t\t\t'show': true,\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tdata.action = 'edit';\r\n\t\t\t\t\t\t\tdata.url = '/payroll-process';\r\n\t\t\t\t\t\t\tdata.label = 'Payroll process';\r\n\r\n\t\t\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.controller = 'payrollProcessDialogController';\r\n\t\t\t\t\t\t\tdialog.template = '/app/components/payroll/templates/dialogs/payroll-process-form-dialog.template.html';\r\n\r\n\t\t\t\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.notify('Payroll process updated.');\r\n\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Delete',\r\n\t\t\t\t\t\t'icon': 'mdi-delete',\r\n\t\t\t\t\t\t'show': true,\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.title = 'Delete';\r\n\t\t\t\t\t\t\tdialog.message = 'Delete ' + new Date(data.payroll_period.start_cut_off).toLocaleDateString() + ' - ' + new Date(data.payroll_period.end_cut_off).toLocaleDateString() + ' payroll process?'\r\n\t\t\t\t\t\t\tdialog.ok = 'Delete';\r\n\t\t\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.delete('/payroll-process/' + data.id)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.notify('Payroll process deleted.');\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tview: function(data){\r\n\t\t\t\t\t$state.go('main.payroll-process', {payrollProcessID: data.id});\r\n\t\t\t\t},\r\n\t\t\t\taction: function(current){\r\n\t\t\t\t\tsetInit(current);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t// Thirteenth Month Pay Process\r\n\t\t\t{\r\n\t\t\t\t'label':'Thirteenth Month Pay Processes',\r\n\t\t\t\t'url': '/thirteenth-month-pay-process/enlist',\r\n\t\t\t\t'request' : {\r\n\t\t\t\t\t'with' : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation':'batch',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'paginate':20,\r\n\t\t\t\t},\r\n\t\t\t\t'fab': {\r\n\t\t\t\t\t'fullscreen' : true,\r\n\t\t\t\t\t'controller':'thirteenthMonthPayProcessDialogController',\r\n\t\t\t\t\t'template':'/app/components/payroll/templates/dialogs/thirteenth-month-pay-process-form-dialog.template.html',\r\n\t\t\t\t\t'message': 'Thirteenth month pay process saved.',\r\n\t\t\t\t\t'action' : 'create',\r\n\t\t\t\t\t'fullscreen' : true,\r\n\t\t\t\t\t'url': '/thirteenth-month-pay-process',\r\n\t\t\t\t\t'label': 'Thirteenth month pay process',\r\n\t\t\t\t},\r\n\t\t\t\t'menu': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Edit',\r\n\t\t\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t\t\t'show': true,\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tdata.action = 'edit';\r\n\t\t\t\t\t\t\tdata.url = '/thirteenth-month-pay-process';\r\n\t\t\t\t\t\t\tdata.label = 'Thirteenth month pay process';\r\n\r\n\t\t\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.controller = 'thirteenthMonthPayProcessDialogController';\r\n\t\t\t\t\t\t\tdialog.template = '/app/components/payroll/templates/dialogs/thirteenth-month-pay-process-form-dialog.template.html';\r\n\r\n\t\t\t\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.notify('Thirteenth month pay process updated.');\r\n\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Delete',\r\n\t\t\t\t\t\t'icon': 'mdi-delete',\r\n\t\t\t\t\t\t'show': true,\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.title = 'Delete';\r\n\t\t\t\t\t\t\tdialog.message = 'Delete ' + new Date(data.start).toLocaleDateString() + ' - ' + new Date(data.end).toLocaleDateString() + ' thirteenth month pay process?'\r\n\t\t\t\t\t\t\tdialog.ok = 'Delete';\r\n\t\t\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.delete('/thirteenth-month-pay-process/' + data.id)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.notify('Thirteenth month pay process deleted.');\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tview: function(data){\r\n\t\t\t\t\t$state.go('main.thirteenth-month-pay-process', {thirteenthMonthPayProcessID: data.id});\r\n\t\t\t\t},\r\n\t\t\t\taction: function(current){\r\n\t\t\t\t\tsetInit(current);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tsetInit($scope.subheader.navs[0]);\r\n\t}]);","payroll\r\n\t.controller('payrollEntryToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'Payroll Entry';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.hideSearchIcon = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t\t$scope.showInactive = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);","payroll\r\n\t.controller('payrollProcessToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);","payroll\r\n\t.controller('payrollToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'Payroll';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.type.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.type.page = 1;\r\n\t\t\t\t$scope.type.no_matches = false;\r\n\t\t\t\t$scope.type.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);","payroll\r\n\t.controller('thirteenthMonthPayProcessToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);"]}