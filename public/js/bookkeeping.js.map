{"version":3,"sources":["bookkeeping.module.js","controllers/business-partners-content-container.controller.js","controllers/manage-customer-content-container.controller.js","controllers/subheaders/business-partners-subheader.controller.js","controllers/toolbars/business-partners-toolbar.controller.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bookkeeping.js","sourcesContent":["var bookkeeping = angular.module('bookkeeping', []);","bookkeeping\r\n\t.controller('businessPartnersContentContainerController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\r\n\t\t$scope.subheader.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.subheader.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\t\t\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t/* Action originates from subheader */\r\n\t\t$scope.$on('setInit', function(){\r\n\t\t\tvar current = Helper.fetch();\r\n\r\n\t\t\t$scope.subheader.current = current;\r\n\t\t\t$scope.isLoading = true;\r\n\t\t\t$scope.init(current);\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.showInactive = false;\r\n\r\n\t\t\t$scope.view = function(data){\r\n\t\t\t\t$scope.subheader.current.view(data);\r\n\t\t\t}\r\n\r\n\t\t\t$scope.edit = function(data){\r\n\t\t\t\t$scope.subheader.current.menu[0].action(data);\r\n\t\t\t}\r\n\r\n\t\t\t$scope.delete = function(data){\r\n\t\t\t\t$scope.subheader.current.menu[1].action(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.subheader.current.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.showInactive = true;\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.subheader.current.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\t// \r\n\t\t}\r\n\r\n\t\t$scope.init = function(query, refresh){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post(query.url, query.request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.label = query.label;\r\n\t\t\t\t\t\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.action = function(){\r\n\t\t\t\t\t\t$state.go(query.fab.state)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post(query.url + '?page=' + $scope.model.page, query.request)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t\t$scope.model.paginateLoad();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.init(query, refresh);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.subheader.current);\r\n\t\t};\r\n\t}]);","bookkeeping\r\n\t.controller('manageCustomerContentContainerController', ['$scope', '$filter', '$state', '$stateParams', '$mdMedia', 'Helper', function($scope, $filter, $state, $stateParams, $mdMedia, Helper){\r\n\t\tif($mdMedia('xs') || $mdMedia('sm') || $mdMedia('md')){\r\n\t\t\t$scope.$emit('closeSidenav');\r\n\t\t}\r\n\r\n\t\t$scope.form = {}\r\n\r\n\t\t$scope.customer = {};\r\n\r\n\t\t$scope.customerTypes = ['Individual', 'Corporation'];\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.hideSearchIcon = true;\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/customer/check-duplicate', $scope.customer)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.checkDuplicate();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.checkCity = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.search = $scope.customer.city;\r\n\t\t\tquery.strict_search = true;\r\n\r\n\t\t\tHelper.post('/city/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.cities = data;\r\n\t\t\t\t\t$scope.showError = data.length ? false : true;\r\n\r\n\t\t\t\t\tif($scope.customer.province_id)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.checkProvince();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.checkCity();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.fetchProvinces = function(){\r\n\t\t\tHelper.post('/province/enlist', $scope.customer)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.provinces = data;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.fetchProvinces();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.checkProvince = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.customer.province_id\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t\tquery.city = $scope.customer.city;\r\n\t\t\tquery.result = 'first';\r\n\r\n\t\t\tHelper.post('/province/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.noMatches = data.cities.length ? false : true;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.checkProvince();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.formatTIN = function(tin){\r\n\t\t\tif($scope.form.customerForm.TIN.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = tin.slice(0,3);\r\n\t\t\t\tvar second = tin.slice(3,6);\r\n\t\t\t\tvar third = tin.slice(6,9);\r\n\r\n\t\t\t\t$scope.customer.tin = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-check';\r\n\t\t$scope.fab.label = 'Submit';\r\n\t\t$scope.fab.show = true;\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tif($scope.form.customerForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.form.customerForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tHelper.alert('Oops!', 'Kindly check form for errors.');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tHelper.preload();\r\n\r\n\t\t\t\tif(!$stateParams.customerID)\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/customer', $scope.customer)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$state.go('main.business-partners');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/customer/' + $stateParams.customerID, $scope.customer)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$state.go('main.business-partners');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\tvar request = {};\r\n\r\n\t\t\trequest.orderBy = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'created_at',\r\n\t\t\t\t\t'sort' : 'desc'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\r\n\t\t\trequest.first = true;\r\n\t\t\trequest.withTrashed = true;\r\n\r\n\t\t\tif($stateParams.customerID)\r\n\t\t\t{\r\n\t\t\t\tvar request = {}\r\n\r\n\t\t\t\trequest.where = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $stateParams.customerID,\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\r\n\t\t\t\trequest.withTrashed = true;\r\n\r\n\t\t\t\trequest.first = true;\r\n\r\n\t\t\t\t$scope.customer_fetch = function(){\r\n\t\t\t\t\tHelper.post('/customer/enlist', request)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.customer = data;\r\n\r\n\t\t\t\t\t\t\t$scope.tin = data.tin.replace(/-/g, '');\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$scope.toolbar.childState = data.last_name + ', ' + data.first_name;\r\n\r\n\t\t\t\t\t\t\t$scope.show = true;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.failed()\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t$scope.customer_fetch();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t$scope.toolbar.childState = 'Customer';\r\n\t\t\t\t$scope.show = true;\r\n\t\t\t}\r\n\t\t}();\r\n\t}]);","bookkeeping\r\n\t.controller('businessPartnersSubheaderController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\tvar setInit = function(data){\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\t$scope.$emit('setInit');\r\n\t\t}\r\n\r\n\t\t$scope.subheader.navs = [\r\n\t\t\t// Customers\r\n\t\t\t{\r\n\t\t\t\t'label':'Customers',\r\n\t\t\t\t'url': '/customer/enlist',\r\n\t\t\t\t'request' : {\r\n\t\t\t\t\t'paginate':20,\r\n\t\t\t\t},\r\n\t\t\t\t'fab': {\r\n\t\t\t\t\t'state' : 'main.manage-customer'\r\n\t\t\t\t},\r\n\t\t\t\t'menu': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Edit',\r\n\t\t\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t\t\t'show': true,\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\t\t\t$state.go('main.manage-customer', {customerID: data.id});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Delete',\r\n\t\t\t\t\t\t'icon': 'mdi-delete',\r\n\t\t\t\t\t\t'show': true,\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.title = 'Delete';\r\n\t\t\t\t\t\t\tdialog.message = 'Delete this customer?'\r\n\t\t\t\t\t\t\tdialog.ok = 'Delete';\r\n\t\t\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.delete('/customer/' + data.id)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.notify('Customer deleted.');\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tview: function(data){\r\n\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\tvar dialog = {\r\n\t\t\t\t\t\t'template': '/app/components/bookkeeping/templates/dialogs/customer-dialog.template.html',\r\n\t\t\t\t\t\t'controller': 'customerDialogController',\r\n\t\t\t\t\t\t'fullscreen': true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tHelper.customDialog(dialog);\r\n\t\t\t\t},\r\n\t\t\t\taction: function(current){\r\n\t\t\t\t\tsetInit(current);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.subheader.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'First Name',\r\n\t\t\t\t'type': 'first_name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Last Name',\r\n\t\t\t\t'type': 'last_name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently Added',\r\n\t\t\t\t'type': 'created_At',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t]\r\n\r\n\t\tsetInit($scope.subheader.navs[0]);\r\n\t}]);","bookkeeping\r\n\t.controller('businessPartnersToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'Business Partners';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t\t$scope.showInactive = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);"],"sourceRoot":"/source/"}