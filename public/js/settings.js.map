{"version":3,"sources":["settings.module.js","controllers/profile-settings-content-container.controller.js","controllers/dialogs/edit-profile-dialog.controller.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"settings.js","sourcesContent":["var settings = angular.module('settings', []);","settings\r\n\t.controller('profileSettingsContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Profile';\r\n\r\n\t\t$scope.toolbar.hideSearchIcon = true;\r\n\r\n\t\t$scope.fab = {}\r\n\r\n\t\t$scope.fab.icon = 'mdi-pencil';\r\n\t\t$scope.fab.label = 'Edit';\r\n\r\n\t\t$scope.fab.dialog = {};\r\n\t\t\r\n\t\t$scope.fab.dialog.controller = 'editProfileDialogController';\r\n\t\t$scope.fab.dialog.template = '/app/components/settings/templates/dialogs/edit-profile-dialog.template.html';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tHelper.customDialog($scope.fab.dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.preload();\r\n\t\t\t\t\tHelper.notify('Changes saved.')\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.init(true);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.fab.show = true;\r\n\r\n\t\t$scope.init = function(refresh)\r\n\t\t{\r\n\t\t\tvar query = {};\r\n\t\t\tquery.with = ['city', 'province', 'country'];\r\n\r\n\t\t\tHelper.post('/company/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.company = data;\r\n\r\n\t\t\t\t\tif(refresh)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.init();\r\n\t}]);","settings\r\n\t.controller('editProfileDialogController', ['$scope', '$filter', 'Helper', function($scope, $filter, Helper){\r\n\t\t$scope.company = {};\r\n\t\t$scope.company.country_id = 177; //Philippines\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.checkCity = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.search = $scope.company.city;\r\n\t\t\tquery.strict_search = true;\r\n\r\n\t\t\tHelper.post('/city/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.cities = data;\r\n\t\t\t\t\t$scope.showError = data.length ? false : true;\r\n\r\n\t\t\t\t\tif($scope.company.province_id)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.checkProvince();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.fetchProvinces = function(){\r\n\t\t\tHelper.post('/province/enlist', $scope.company)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.provinces = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.checkProvince = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.company.province_id\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t\tquery.city = $scope.company.city;\r\n\t\t\tquery.result = 'first';\r\n\r\n\t\t\tHelper.post('/province/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.noMatches = data.cities.length ? false : true;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.formatPagIBIG = function(){\r\n\t\t\tif($scope.companyForm.PagIBIG.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.pagibig.slice(0,4);\r\n\t\t\t\tvar second = $scope.pagibig.slice(4,8);\r\n\t\t\t\tvar third = $scope.pagibig.slice(8,12);\r\n\r\n\t\t\t\t$scope.company.pagibig = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.formatPhilHealth = function(){\r\n\t\t\tif($scope.companyForm.PhilHealth.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.philhealth.slice(0,2);\r\n\t\t\t\tvar second = $scope.philhealth.slice(2,11);\r\n\t\t\t\tvar third = $scope.philhealth.slice(11,12);\r\n\r\n\t\t\t\t$scope.company.philhealth = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.formatSSS = function(){\r\n\t\t\tif($scope.companyForm.SSS.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.sss.slice(0,2);\r\n\t\t\t\tvar second = $scope.sss.slice(2,9);\r\n\t\t\t\tvar third = $scope.sss.slice(9,10);\r\n\r\n\t\t\t\t$scope.company.sss = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\t\t$scope.formatTIN = function(){\r\n\t\t\tif($scope.companyForm.TIN.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.tin.slice(0,3);\r\n\t\t\t\tvar second = $scope.tin.slice(3,6);\r\n\t\t\t\tvar third = $scope.tin.slice(6,9);\r\n\r\n\t\t\t\t$scope.company.tin = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\t\t\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.companyForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.companyForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$scope.busy = true;\r\n\t\t\tHelper.put('/company/1', $scope.company)\r\n\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\tHelper.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.init = function()\r\n\t\t{\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tquery.with = ['city'];\r\n\r\n\t\t\tHelper.post('/company/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.city = data.city.name;\r\n\r\n\t\t\t\t\t$scope.pagibig = data.pagibig.replace(/-/g, '');\r\n\t\t\t\t\t$scope.philhealth = data.philhealth.replace(/-/g, '');\r\n\t\t\t\t\t$scope.sss = data.sss.replace(/-/g, '');\r\n\t\t\t\t\t$scope.tin = data.tin.replace(/-/g, '');\r\n\r\n\t\t\t\t\t$scope.company = data;\r\n\r\n\t\t\t\t\t$scope.checkCity();\r\n\t\t\t\t\t$scope.fetchProvinces();\r\n\t\t\t\t})\r\n\t\t}();\r\n\t}]);"],"sourceRoot":"/source/"}