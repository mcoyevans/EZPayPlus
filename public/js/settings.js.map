{"version":3,"sources":["settings.module.js","controllers/admin-settings-content-container.controller.js","controllers/profile-settings-content-container.controller.js","controllers/dialogs/create-branch-dialog.controller.js","controllers/dialogs/create-group-dialog.controller.js","controllers/dialogs/create-house-bank-dialog.controller.js","controllers/dialogs/create-user-dialog.controller.js","controllers/dialogs/edit-branch-dialog.controller.js","controllers/dialogs/edit-group-dialog.controller.js","controllers/dialogs/edit-house-bank-dialog.controller.js","controllers/dialogs/edit-profile-dialog.controller.js","controllers/dialogs/edit-user-dialog.controller.js","controllers/subheaders/admin-settings-subheader.controller.js","controllers/toolbars/admin-settings-toolbar.controller.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"settings.js","sourcesContent":["var settings = angular.module('settings', []);","settings\r\n\t.controller('adminSettingsContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\r\n\t\t$scope.subheader.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.subheader.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t/* Action originates from subheader */\r\n\t\t$scope.$on('setInit', function(){\r\n\t\t\tvar current = Helper.fetch();\r\n\r\n\t\t\t$scope.subheader.current = current;\r\n\r\n\t\t\t$scope.init(current);\r\n\t\t});\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.subheader.current.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.showInactive = true;\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.subheader.current.request.search = null;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.listItemAction = function(data){\r\n\t\t\tif(!data.deleted_at)\r\n\t\t\t{\r\n\t\t\t\tdata.current = $scope.subheader.current \r\n\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\tvar dialog = {};\r\n\t\t\t\tdialog.controller = 'listItemActionsDialogController';\r\n\t\t\t\tdialog.template = '/app/shared/templates/dialogs/list-item-actions-dialog.template.html';\r\n\r\n\t\t\t\tHelper.customDialog(dialog);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.created_at = new Date(data.created_at);\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.name;\r\n\t\t\titem.description = data.description;\r\n\t\t\titem.gl_account = data.gl_account;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query, refresh){\r\n\t\t\t$scope.type = {};\r\n\t\t\t$scope.type.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t$scope.$broadcast('close');\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.type.page = 2;\r\n\r\n\t\t\tHelper.post(query.url, query.request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.type.details = data;\r\n\t\t\t\t\t$scope.type.items = data.data;\r\n\t\t\t\t\t$scope.type.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.label = query.label;\r\n\t\t\t\t\t$scope.fab.action = function(){\r\n\t\t\t\t\t\tHelper.customDialog(query.fab)\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tHelper.notify(query.fab.message);\r\n\t\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.type.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.type.busy || ($scope.type.page > $scope.type.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.type.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post(query.url + '?page=' + $scope.type.page, query.request)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.type.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.type.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.type.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.type.show = false;\r\n\r\n  \t\t\t$scope.init($scope.subheader.current);\r\n\t\t};\r\n\t}]);","settings\r\n\t.controller('profileSettingsContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Profile';\r\n\r\n\t\t$scope.toolbar.hideSearchIcon = true;\r\n\r\n\t\t$scope.fab = {}\r\n\r\n\t\t$scope.fab.icon = 'mdi-pencil';\r\n\t\t$scope.fab.label = 'Edit';\r\n\r\n\t\t$scope.fab.dialog = {};\r\n\t\t\r\n\t\t$scope.fab.dialog.controller = 'editProfileDialogController';\r\n\t\t$scope.fab.dialog.template = '/app/components/settings/templates/dialogs/edit-profile-dialog.template.html';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tHelper.customDialog($scope.fab.dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.preload();\r\n\t\t\t\t\tHelper.notify('Changes saved.')\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t$scope.init(true);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.fab.show = true;\r\n\r\n\t\t$scope.init = function(refresh)\r\n\t\t{\r\n\t\t\tvar query = {};\r\n\t\t\tquery.with = ['city', 'province', 'country'];\r\n\r\n\t\t\tHelper.post('/company/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.company = data;\r\n\r\n\t\t\t\t\tif(refresh)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.init();\r\n\t}]);","settings\r\n\t.controller('createBranchDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.branch = {};\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/branch/check-duplicate', $scope.branch)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.branchForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.branchForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\tHelper.post('/branch', $scope.branch)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('createGroupDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.group = {};\r\n\t\t$scope.group.modules = [];\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\tHelper.get('/module')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.modules = data;\r\n\t\t\t})\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/group/check-duplicate', $scope.group)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.groupForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.groupForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\t\r\n\t\t\t\tHelper.post('/group', $scope.group)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('createHouseBankDialogController', ['$scope', '$filter', 'Helper', function($scope, $filter, Helper){\r\n\t\t$scope.house_bank = {};\r\n\t\t$scope.currency = {};\r\n\t\t$scope.duplicateBankAccountNumber = false;\r\n\t\t$scope.duplicateGLAccount = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\tHelper.get('/currency')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.currencies = data;\r\n\t\t\t})\r\n\r\n\t\t$scope.currency.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.currencies, query) : $scope.currencies;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(query){\r\n\t\t\tHelper.post('/house-bank/check-duplicate', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tif(query.bank_account_number)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.duplicateBankAccountNumber = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(query.gl_account)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.duplicateGLAccount = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.houseBankForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.houseBankForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicateBankAccountNumber && !$scope.duplicateGLAccount)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\tHelper.post('/house-bank', $scope.house_bank)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('createUserDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar user = Helper.authUser();\r\n\r\n\t\t$scope.user = {};\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\t\t\r\n\t\tHelper.post('/group/enlist')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.groups = data;\r\n\t\t\t})\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/user/check-email', $scope.user)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data ? true : false;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.error = false;\r\n\t\t\tif($scope.userForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.userForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicate && $scope.user.password == $scope.user.confirm)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\tHelper.post('/user', $scope.user)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('editBranchDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar branch = Helper.fetch();\r\n\r\n\t\tHelper.get('/branch/' + branch.id)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.branch = data;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tPreloader.error();\r\n\t\t\t});\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/branch/check-duplicate', $scope.branch)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.branchForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.branchForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\tHelper.put('/branch/' + $scope.branch.id, $scope.branch)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('editGroupDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar group = Helper.fetch();\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\tvar query = {};\r\n\t\tquery.where = [\r\n\t\t\t{\r\n\t\t\t\t'label':'id',\r\n\t\t\t\t'condition':'=',\r\n\t\t\t\t'value': group.id,\r\n\t\t\t}\r\n\t\t];\r\n\t\tquery.first = true;\r\n\r\n\t\tHelper.get('/module')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.modules = data;\r\n\r\n\t\t\t\t$scope.count = $scope.modules.length;\r\n\t\t\t\tHelper.post('/group/enlist', query)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.group = data;\r\n\t\t\t\t\t\t$scope.group.modules = [];\r\n\r\n\t\t\t\t\t\tangular.forEach($scope.modules, function(item, key){\r\n\t\t\t\t\t\t\t$scope.group.modules.push(null);\r\n\r\n\t\t\t\t\t\t\tvar query = {};\r\n\t\t\t\t\t\t\tquery.with = [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'module',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tquery.where = [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label': 'group_id',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': group.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label': 'module_id',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': item.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tquery.first = true;\r\n\r\n\t\t\t\t\t\t\tHelper.post('/group-module/enlist', query)\r\n\t\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t\t$scope.count--;\r\n\t\t\t\t\t\t\t\t\tif(data)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t$scope.group.modules.splice(key, 1, data.module);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/group/check-duplicate', $scope.group)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.groupForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.groupForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\t\r\n\t\t\t\tHelper.put('/group/' + group.id, $scope.group)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('editHouseBankDialogController', ['$scope', '$filter', 'Helper', function($scope, $filter, Helper){\r\n\t\tvar house_bank = Helper.fetch();\r\n\r\n\t\t$scope.currency = {};\r\n\t\t$scope.duplicateBankAccountNumber = false;\r\n\t\t$scope.duplicateGLAccount = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\tvar query = {};\r\n\t\tquery.where = [\r\n\t\t\t{\r\n\t\t\t\t'label':'id',\r\n\t\t\t\t'condition':'=',\r\n\t\t\t\t'value':house_bank.id,\r\n\t\t\t}\r\n\t\t];\r\n\t\tquery.with = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'currency',\r\n\t\t\t\t'withTrashed':false,\r\n\t\t\t},\r\n\t\t];\r\n\t\tquery.first = true;\r\n\r\n\t\tHelper.post('/house-bank/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.house_bank = data;\r\n\r\n\t\t\t\tHelper.get('/currency')\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.currencies = data;\r\n\t\t\t\t\t\t$scope.currency.getItems();\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t});\r\n\r\n\t\t$scope.currency.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.currencies, query) : $scope.currencies;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(query){\r\n\t\t\tquery.id = house_bank.id;\r\n\t\t\tHelper.post('/house-bank/check-duplicate', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tif(query.bank_account_number)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.duplicateBankAccountNumber = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(query.gl_account)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.duplicateGLAccount = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.houseBankForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.houseBankForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicateBankAccountNumber && !$scope.duplicateGLAccount)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\tHelper.put('/house-bank/' + $scope.house_bank.id, $scope.house_bank)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('editProfileDialogController', ['$scope', '$filter', 'Helper', function($scope, $filter, Helper){\r\n\t\t$scope.company = {};\r\n\t\t$scope.company.country_id = 177; //Philippines\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.checkCity = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.search = $scope.company.city;\r\n\t\t\tquery.strict_search = true;\r\n\r\n\t\t\tHelper.post('/city/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.cities = data;\r\n\t\t\t\t\t$scope.showError = data.length ? false : true;\r\n\r\n\t\t\t\t\tif($scope.company.province_id)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.checkProvince();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.fetchProvinces = function(){\r\n\t\t\tHelper.post('/province/enlist', $scope.company)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.provinces = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.checkProvince = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.company.province_id\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t\tquery.city = $scope.company.city;\r\n\t\t\tquery.result = 'first';\r\n\r\n\t\t\tHelper.post('/province/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.noMatches = data.cities.length ? false : true;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.formatPagIBIG = function(){\r\n\t\t\tif($scope.companyForm.PagIBIG.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.pagibig.slice(0,4);\r\n\t\t\t\tvar second = $scope.pagibig.slice(4,8);\r\n\t\t\t\tvar third = $scope.pagibig.slice(8,12);\r\n\r\n\t\t\t\t$scope.company.pagibig = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.formatPhilHealth = function(){\r\n\t\t\tif($scope.companyForm.PhilHealth.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.philhealth.slice(0,2);\r\n\t\t\t\tvar second = $scope.philhealth.slice(2,11);\r\n\t\t\t\tvar third = $scope.philhealth.slice(11,12);\r\n\r\n\t\t\t\t$scope.company.philhealth = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.formatSSS = function(){\r\n\t\t\tif($scope.companyForm.SSS.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.sss.slice(0,2);\r\n\t\t\t\tvar second = $scope.sss.slice(2,9);\r\n\t\t\t\tvar third = $scope.sss.slice(9,10);\r\n\r\n\t\t\t\t$scope.company.sss = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\t\t$scope.formatTIN = function(){\r\n\t\t\tif($scope.companyForm.TIN.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = $scope.tin.slice(0,3);\r\n\t\t\t\tvar second = $scope.tin.slice(3,6);\r\n\t\t\t\tvar third = $scope.tin.slice(6,9);\r\n\r\n\t\t\t\t$scope.company.tin = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\t\t\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.companyForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.companyForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$scope.busy = true;\r\n\t\t\tHelper.put('/company/1', $scope.company)\r\n\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\tHelper.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.init = function()\r\n\t\t{\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tquery.with = ['city'];\r\n\r\n\t\t\tHelper.post('/company/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.city = data.city.name;\r\n\r\n\t\t\t\t\t$scope.pagibig = data.pagibig.replace(/-/g, '');\r\n\t\t\t\t\t$scope.philhealth = data.philhealth.replace(/-/g, '');\r\n\t\t\t\t\t$scope.sss = data.sss.replace(/-/g, '');\r\n\t\t\t\t\t$scope.tin = data.tin.replace(/-/g, '');\r\n\r\n\t\t\t\t\t$scope.company = data;\r\n\r\n\t\t\t\t\t$scope.checkCity();\r\n\t\t\t\t\t$scope.fetchProvinces();\r\n\t\t\t\t})\r\n\t\t}();\r\n\t}]);","settings\r\n\t.controller('editUserDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar user = Helper.authUser();\r\n\r\n\t\tvar dataUser = Helper.fetch();\r\n\t\t\r\n\t\t$scope.edit = true;\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\tHelper.get('/user/' + dataUser.id)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.user = data;\r\n\t\t\t})\r\n\r\n\t\tHelper.post('/group/enlist')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.groups = data;\r\n\t\t\t})\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/user/check-email', $scope.user)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data ? true : false;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.error = false;\r\n\t\t\tif($scope.userForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.userForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\tHelper.put('/user/' + dataUser.id , $scope.user)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","settings\r\n\t.controller('adminSettingsSubheaderController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar setInit = function(data){\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\t$scope.$emit('setInit');\r\n\t\t}\r\n\r\n\t\t$scope.subheader.navs = [\r\n\t\t\t{\r\n\t\t\t\t'label':'Branches',\r\n\t\t\t\t'url': '/branch/enlist',\r\n\t\t\t\t'request': {\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t'paginate':20,\r\n\t\t\t\t},\r\n\t\t\t\t'fab': {\r\n\t\t\t\t\t'controller':'createBranchDialogController',\r\n\t\t\t\t\t'template':'/app/components/settings/templates/dialogs/branch-form-dialog.template.html',\r\n\t\t\t\t\t'message': 'Branch saved.'\r\n\t\t\t\t},\r\n\t\t\t\t'menu': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Edit',\r\n\t\t\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.controller = 'editBranchDialogController';\r\n\t\t\t\t\t\t\tdialog.template = '/app/components/settings/templates/dialogs/branch-form-dialog.template.html';\r\n\r\n\t\t\t\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Delete',\r\n\t\t\t\t\t\t'icon': 'mdi-delete',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.title = 'Delete Branch';\r\n\t\t\t\t\t\t\tdialog.message = 'Delete ' + data.name + ' branch?'\r\n\t\t\t\t\t\t\tdialog.ok = 'Delete';\r\n\t\t\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.delete('/branch/' + data.id)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'sort': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Name',\r\n\t\t\t\t\t\t'type': 'name',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Description',\r\n\t\t\t\t\t\t'type': 'description',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'GL Account',\r\n\t\t\t\t\t\t'type': 'gl_account',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t\t\t'type': 'created_at',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\taction: function(current){\r\n\t\t\t\t\tsetInit(current);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label':'House Banks',\r\n\t\t\t\t'url': '/house-bank/enlist',\r\n\t\t\t\t'request': {\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t'with': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation' : 'currency',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'paginate':20,\r\n\t\t\t\t},\r\n\t\t\t\t'fab': {\r\n\t\t\t\t\t'controller':'createHouseBankDialogController',\r\n\t\t\t\t\t'template':'/app/components/settings/templates/dialogs/house-bank-form-dialog.template.html',\r\n\t\t\t\t\t'message': 'House bank saved.'\r\n\t\t\t\t},\r\n\t\t\t\taction: function(current){\r\n\t\t\t\t\tsetInit(current);\r\n\t\t\t\t},\r\n\t\t\t\t'menu': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Edit',\r\n\t\t\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.controller = 'editHouseBankDialogController';\r\n\t\t\t\t\t\t\tdialog.template = '/app/components/settings/templates/dialogs/house-bank-form-dialog.template.html';\r\n\r\n\t\t\t\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Delete',\r\n\t\t\t\t\t\t'icon': 'mdi-delete',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.title = 'Delete House Bank';\r\n\t\t\t\t\t\t\tdialog.message = 'Delete ' + data.name + ' house bank?'\r\n\t\t\t\t\t\t\tdialog.ok = 'Delete';\r\n\t\t\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.delete('/house-bank/' + data.id)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'sort': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Name',\r\n\t\t\t\t\t\t'type': 'name',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Bank Branch',\r\n\t\t\t\t\t\t'type': 'bank_branch',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Bank Account Number',\r\n\t\t\t\t\t\t'type': 'bank_account_number',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Bank Account Name',\r\n\t\t\t\t\t\t'type': 'bank_account_name',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'GL Account',\r\n\t\t\t\t\t\t'type': 'gl_account',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t\t\t'type': 'created_at',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label':'User Groups',\r\n\t\t\t\t'url': '/group/enlist',\r\n\t\t\t\t'request' : {\r\n\t\t\t\t\t'with': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation':'modules',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'paginate':20,\r\n\t\t\t\t},\r\n\t\t\t\t'fab': {\r\n\t\t\t\t\t'controller':'createGroupDialogController',\r\n\t\t\t\t\t'template':'/app/components/settings/templates/dialogs/group-form-dialog.template.html',\r\n\t\t\t\t\t'message': 'User group saved.'\r\n\t\t\t\t},\r\n\t\t\t\t'menu': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Edit',\r\n\t\t\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.controller = 'editGroupDialogController';\r\n\t\t\t\t\t\t\tdialog.template = '/app/components/settings/templates/dialogs/group-form-dialog.template.html';\r\n\r\n\t\t\t\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Delete',\r\n\t\t\t\t\t\t'icon': 'mdi-delete',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.title = 'Delete Group';\r\n\t\t\t\t\t\t\tdialog.message = 'Delete ' + data.name + ' group?'\r\n\t\t\t\t\t\t\tdialog.ok = 'Delete';\r\n\t\t\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.delete('/group/' + data.id)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'sort': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Name',\r\n\t\t\t\t\t\t'type': 'name',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Description',\r\n\t\t\t\t\t\t'type': 'description',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t\t\t'type': 'created_at',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\taction: function(current){\r\n\t\t\t\t\tsetInit(current);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label':'Users',\r\n\t\t\t\t'url': '/user/enlist',\r\n\t\t\t\t'request' : {\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t'with' : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'relation':'group',\r\n\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t\t\t'condition':'!=',\r\n\t\t\t\t\t\t\t'value': 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'paginate':20,\r\n\t\t\t\t},\r\n\t\t\t\t'fab': {\r\n\t\t\t\t\t'controller':'createUserDialogController',\r\n\t\t\t\t\t'template':'/app/components/settings/templates/dialogs/user-form-dialog.template.html',\r\n\t\t\t\t\t'message': 'User saved.'\r\n\t\t\t\t},\r\n\t\t\t\t'menu': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Edit',\r\n\t\t\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.controller = 'editUserDialogController';\r\n\t\t\t\t\t\t\tdialog.template = '/app/components/settings/templates/dialogs/user-form-dialog.template.html';\r\n\r\n\t\t\t\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Disable Account',\r\n\t\t\t\t\t\t'icon': 'mdi-account-remove',\r\n\t\t\t\t\t\taction: function(data){\r\n\t\t\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\t\t\tdialog.title = 'Disable account';\r\n\t\t\t\t\t\t\tdialog.message = 'Disable ' + data.name + '\\'s account?'\r\n\t\t\t\t\t\t\tdialog.ok = 'Disable';\r\n\t\t\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.delete('/user/' + data.id)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'sort': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Name',\r\n\t\t\t\t\t\t'type': 'name',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Email',\r\n\t\t\t\t\t\t'type': 'email',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t\t\t'type': 'created_at',\r\n\t\t\t\t\t\t'sortReverse': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\taction: function(current){\r\n\t\t\t\t\tsetInit(current);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tsetInit($scope.subheader.navs[0]);\r\n\t}]);","settings\r\n\t.controller('adminSettingsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Admin';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.type.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t\t$scope.showInactive = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.type.page = 1;\r\n\t\t\t\t$scope.type.no_matches = false;\r\n\t\t\t\t$scope.type.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);"],"sourceRoot":"/source/"}