{"version":3,"sources":["hris.module.js","controllers/hris-content-container.controller.js","controllers/manage-employee-content-container.controller.js","controllers/dialogs/employee-information-dialog.controller.js","controllers/subheaders/hris-subheader.controller.js","controllers/toolbars/hris-toolbar.controller.js","controllers/toolbars/manage-employee-toolbar.controller.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"hris.js","sourcesContent":["var hris = angular.module('hris', []);","hris\r\n\t.controller('hrisContentContainerController', ['$scope', '$state', '$mdMedia', 'Helper', function($scope, $state, $mdMedia, Helper){\r\n\t\tif($mdMedia('xs') || $mdMedia('sm') || $mdMedia('md')){\r\n\t\t\t$scope.$emit('closeSidenav');\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\r\n\t\t$scope.subheader.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\r\n\t\t$scope.subheader.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\t\t$scope.fab.label = 'Employee';\r\n\t\t$scope.fab.action = function(){\r\n\t\t\t$state.go('main.manage-employee');\r\n\t\t}\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.showInactive = true;\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t});\r\n\r\n\t\t$scope.view = function(data){\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template': '/app/components/hris/templates/dialogs/employee-information-dialog.template.html',\r\n\t\t\t\t'controller': 'employeeInformationDialogController',\r\n\t\t\t\t'fullscreen': true\r\n\t\t\t}\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(data){\r\n\t\t\t\t\tvar confirm = {}\r\n\r\n\t\t\t\t\tconfirm.title = 'Delete';\r\n\t\t\t\t\tconfirm.message = 'Are you sure you want to delete this employee?';\r\n\t\t\t\t\tconfirm.ok = 'Delete';\r\n\t\t\t\t\tconfirm.cancel = 'Cancel';\r\n\r\n\t\t\t\t\tif(data){\r\n\t\t\t\t\t\tHelper.confirm(confirm)\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tHelper.preload();\r\n\t\t\t\t\t\t\t\tHelper.delete('/employee/' + data)\r\n\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\t\t\t\tHelper.notify('Employee deleted.')\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.request = {}\r\n\t\t$scope.request.paginate = 20;\r\n\t\t$scope.request.withTrashed = true;\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/employee/enlist', $scope.request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\t// pushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/employee/enlist' + '?page=' + $scope.model.page, $scope.request)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\t// pushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init();\r\n\t\t};\r\n\r\n\t\t$scope.init();\r\n\t}]);","hris\r\n\t.controller('manageEmployeeContentContainerController', ['$scope', '$filter', '$state', '$stateParams', '$mdMedia', 'Helper', function($scope, $filter, $state, $stateParams, $mdMedia, Helper){\r\n\t\tif($mdMedia('xs') || $mdMedia('sm') || $mdMedia('md')){\r\n\t\t\t$scope.$emit('closeSidenav');\r\n\t\t}\r\n\r\n\t\t$scope.form = {}\r\n\r\n\t\t$scope.employee = {};\r\n\r\n\t\t$scope.employee.allowance_types = [];\r\n\t\t$scope.employee.deduction_types = [];\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.calculateAge = function(birthday){\r\n\t\t\tvar ageDifMs = Date.now() - birthday.getTime();\r\n\t\t    var ageDate = new Date(ageDifMs);\r\n\t\t    $scope.employee.age = Math.abs(ageDate.getUTCFullYear() - 1970);\r\n\t\t}\r\n\r\n\t\t$scope.today = new Date();\r\n\r\n\t\t$scope.civil_status = ['Single', 'Married', 'Widowed'];\r\n\t\t$scope.employment_status = ['Probationary', 'Project Based', 'Regular'];\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/employee/check-duplicate', $scope.employee)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.checkCity = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.search = $scope.employee.city;\r\n\t\t\tquery.strict_search = true;\r\n\r\n\t\t\tHelper.post('/city/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.cities = data;\r\n\t\t\t\t\t$scope.showError = data.length ? false : true;\r\n\r\n\t\t\t\t\tif($scope.employee.province_id)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.checkProvince();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.fetchProvinces = function(){\r\n\t\t\tHelper.post('/province/enlist', $scope.employee)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.provinces = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.checkProvince = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.employee.province_id\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t\tquery.city = $scope.employee.city;\r\n\t\t\tquery.result = 'first';\r\n\r\n\t\t\tHelper.post('/province/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.noMatches = data.cities.length ? false : true;\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\t$scope.formatPagIBIG = function(pagibig){\r\n\t\t\tif($scope.form.employeeForm.PagIBIG.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = pagibig.slice(0,4);\r\n\t\t\t\tvar second = pagibig.slice(4,8);\r\n\t\t\t\tvar third = pagibig.slice(8,12);\r\n\r\n\t\t\t\t$scope.employee.pagibig = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.formatPhilHealth = function(philhealth){\r\n\t\t\tif($scope.form.employeeForm.PhilHealth.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = philhealth.slice(0,2);\r\n\t\t\t\tvar second = philhealth.slice(2,11);\r\n\t\t\t\tvar third = philhealth.slice(11,12);\r\n\r\n\t\t\t\t$scope.employee.philhealth = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.formatSSS = function(sss){\r\n\t\t\tif($scope.form.employeeForm.SSS.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = sss.slice(0,2);\r\n\t\t\t\tvar second = sss.slice(2,9);\r\n\t\t\t\tvar third = sss.slice(9,10);\r\n\r\n\t\t\t\t$scope.employee.sss = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\t\t$scope.formatTIN = function(tin){\r\n\t\t\tif($scope.form.employeeForm.TIN.$valid)\r\n\t\t\t{\r\n\t\t\t\tvar first = tin.slice(0,3);\r\n\t\t\t\tvar second = tin.slice(3,6);\r\n\t\t\t\tvar third = tin.slice(6,9);\r\n\r\n\t\t\t\t$scope.employee.tin = first + '-' + second + '-' + third;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.addEarnings = function(){\r\n\t\t\t$scope.employee.allowance_types.push({});\r\n\t\t}\r\n\r\n\t\t$scope.addDeductions = function(){\r\n\t\t\t$scope.employee.deduction_types.push({});\r\n\t\t}\r\n\r\n\t\t$scope.removeEarnings = function(item){\r\n\t\t\tvar index = $scope.employee.allowance_types.indexOf(item);\r\n\r\n\t\t\tif(item.de_minimis)\r\n\t\t\t{\r\n\t\t\t\tvar de_minimis = $filter('filter')($scope.de_minimis, {'id': item.de_minimis.id})[0];\r\n\r\n\t\t\t\tvar de_minimis_index = $scope.de_minimis.indexOf(de_minimis);\r\n\r\n\t\t\t\t$scope.de_minimis[de_minimis_index].balance = $scope.de_minimis[de_minimis_index].balance + (item.first_cut_off ? item.amount : 0) + (item.second_cut_off ? item.amount : 0) + (item.third_cut_off ? item.amount : 0) + (item.fourth_cut_off ? item.amount : 0);\r\n\r\n\t\t\t\tif($scope.de_minimis[de_minimis_index].balance)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar allowance_type = $filter('filter')($scope.allowance_types, {'id': item.allowance_type_id})[0];\r\n\r\n\t\t\t\t\tvar allowance_type_index = $scope.allowance_types.indexOf(allowance_type);\r\n\r\n\t\t\t\t\t$scope.allowance_types[allowance_type_index].maxed_out = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$scope.employee.allowance_types.splice(index, 1);\r\n\t\t}\r\n\r\n\t\t$scope.removeDeduction = function(item){\r\n\t\t\tvar index = $scope.employee.deduction_types.indexOf(item);\r\n\r\n\t\t\t$scope.employee.deduction_types.splice(index, 1);\r\n\t\t}\r\n\r\n\t\t$scope.checkDeduction = function(data, edit){\r\n\t\t\tconsole.log(data);\r\n\r\n\t\t\tvar siblings = $filter('filter')($scope.employee.deduction_types, {'deduction_type_id': data.deduction_type_id});\r\n\r\n\t\t\tif(!edit){\r\n\t\t\t\tangular.forEach(siblings, function(item){\r\n\t\t\t\t\tdata.first_cut_off_checked = item.first_cut_off ? item.first_cut_off : data.first_cut_off_checked;\r\n\t\t\t\t\tdata.second_cut_off_checked = item.second_cut_off ? item.second_cut_off : data.second_cut_off_checked;\r\n\t\t\t\t\tdata.third_cut_off_checked = item.third_cut_off ? item.third_cut_off : data.third_cut_off_checked;\r\n\t\t\t\t\tdata.fourth_cut_off_checked = item.fourth_cut_off ? item.fourth_cut_off : data.fourth_cut_off_checked;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// check the maximum amount you can still input\r\n\t\t// check for siblings that used the same allowance type\r\n\t\t$scope.checkDeMinimis = function(data, edit){\r\n\t\t\tvar allowance_type = $filter('filter')($scope.allowance_types, {'id': data.allowance_type_id})[0];\r\n\r\n\t\t\tdata.de_minimis = allowance_type.de_minimis_id ? allowance_type.de_minimis : null;\r\n\r\n\t\t\tdata.max = allowance_type.de_minimis_id ? $filter('filter')($scope.de_minimis, {'id': allowance_type.de_minimis_id})[0].balance : null;\r\n\r\n\t\t\tvar siblings = $filter('filter')($scope.employee.allowance_types, {'allowance_type_id': data.allowance_type_id});\r\n\r\n\t\t\tif(!edit){\r\n\t\t\t\tangular.forEach(siblings, function(item){\r\n\t\t\t\t\tdata.first_cut_off_checked = item.first_cut_off ? item.first_cut_off : data.first_cut_off_checked;\r\n\t\t\t\t\tdata.second_cut_off_checked = item.second_cut_off ? item.second_cut_off : data.second_cut_off_checked;\r\n\t\t\t\t\tdata.third_cut_off_checked = item.third_cut_off ? item.third_cut_off : data.third_cut_off_checked;\r\n\t\t\t\t\tdata.fourth_cut_off_checked = item.fourth_cut_off ? item.fourth_cut_off : data.fourth_cut_off_checked;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// check the limit of the allowance type and make it not exceed the balance for the de minimis\r\n\t\t$scope.checkLimit = function(data, cut_off){\r\n\t\t\tvar de_minimis = $filter('filter')($scope.de_minimis, {'id': data.de_minimis.id})[0];\r\n\r\n\t\t\tvar index = $scope.de_minimis.indexOf(de_minimis);\r\n\r\n\t\t\tif(typeof cut_off !== 'undefined')\r\n\t\t\t{\r\n\t\t\t\t$scope.de_minimis[index].balance = cut_off ? $scope.de_minimis[index].balance - data.amount : $scope.de_minimis[index].balance + data.amount;\r\n\t\t\t}\r\n\r\n\t\t\tdata.limit = $scope.de_minimis[index].balance - data.amount < 0 ? true : false;\r\n\r\n\t\t\tif($scope.de_minimis[index].balance <= 0)\r\n\t\t\t{\r\n\t\t\t\tvar allowance_type = $filter('filter')($scope.allowance_types, {'id': data.allowance_type_id})[0];\r\n\r\n\t\t\t\tvar allowance_type_index = $scope.allowance_types.indexOf(allowance_type);\r\n\r\n\t\t\t\t$scope.allowance_types[allowance_type_index].maxed_out = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.checkFrequency = function(data, cut_off){\r\n\t\t\tdata.checked = data.first_cut_off || data.second_cut_off || data.third_cut_off || data.fourth_cut_off || data.on_hold ? true : false;\r\n\r\n\t\t\t$scope.checkLimit(data, cut_off);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-check';\r\n\t\t$scope.fab.label = 'Submit';\r\n\t\t$scope.fab.show = true;\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tif($scope.form.employeeForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.form.employeeForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tHelper.alert('Oops!', 'Kindly check form for errors.');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tvar allowance_unchecked = true;\r\n\r\n\t\t\t\tangular.forEach($scope.employee.allowance_types, function(item, key){\r\n\t\t\t\t\tif(item.first_cut_off || item.second_cut_off || item.third_cut_off || item.fourth_cut_off || item.on_hold)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tallowance_unchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar deduction_unchecked = true;\r\n\r\n\t\t\t\tangular.forEach($scope.employee.deduction_types, function(item, key){\r\n\t\t\t\t\tif(item.first_cut_off || item.second_cut_off || item.third_cut_off || item.fourth_cut_off || item.on_hold)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdeduction_unchecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(deduction_unchecked || allowance_unchecked)\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.alert('Oops!', 'Kindly check form for errors.')\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tHelper.preload();\r\n\r\n\t\t\t\t$scope.employee.birthdate = $scope.employee.birthdate.toLocaleDateString();\r\n\t\t\t\t$scope.employee.date_hired = $scope.employee.date_hired.toDateString();\r\n\r\n\t\t\t\tif(!$stateParams.employeeID)\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/employee', $scope.employee)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$state.go('main.hris');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.employee.birthdate = new Date($scope.employee.birthdate);\r\n\t\t\t\t\t\t\t$scope.employee.date_hired = new Date($scope.employee.date_hired);\r\n\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/employee/' + $stateParams.employeeID, $scope.employee)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$state.go('main.hris');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.employee.birthdate = new Date($scope.employee.birthdate);\r\n\t\t\t\t\t\t\t$scope.employee.date_hired = new Date($scope.employee.date_hired);\r\n\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.test = function(){\r\n\t\t\t$scope.employee.employee_number = 10071128;\r\n\t\t\t$scope.employee.first_name = 'Marco Chrisitan';\r\n\t\t\t$scope.employee.middle_name = 'Santillan';\r\n\t\t\t$scope.employee.last_name = 'Paco';\r\n\t\t\t$scope.employee.birthdate = new Date('12/30/1993');\r\n\t\t\t$scope.employee.age = 22;\r\n\t\t\t$scope.employee.civil_status = 'Single';\r\n\t\t\t$scope.employee.batch_id = 1;\r\n\t\t\t$scope.employee.branch_id = 1;\r\n\t\t\t$scope.employee.cost_center_id = 1;\r\n\t\t\t$scope.employee.position_id = 1;\r\n\t\t\t$scope.employee.employment_status = 'Regular';\r\n\t\t\t$scope.employee.date_hired = new Date('07/29/2015');\r\n\t\t\t$scope.employee.street_address = 'B3 L8 Terry Town Subdivision';\r\n\t\t\t$scope.employee.city = 'Santa Rosa City';\r\n\t\t\t$scope.employee.province_id = 40;\r\n\t\t\t$scope.employee.postal_code = 4026;\r\n\t\t\t$scope.employee.email = 'marcopaco1230@gmail.com';\r\n\t\t\t$scope.employee.mobile_number = '09364589106';\r\n\t\t\t$scope.employee.telephone_number = '(049) 543-1704';\r\n\t\t\t$scope.employee.tax_code_id = 2;\r\n\t\t\t$scope.tin = '012345678';\r\n\t\t\t$scope.sss = '0123456789';\r\n\t\t\t$scope.pagibig = '012345678901';\r\n\t\t\t$scope.philhealth = '012345678901';\r\n\r\n\t\t\t$scope.employee.tin = '012-345-678';\r\n\t\t\t$scope.employee.sss = '01-2345678-9';\r\n\t\t\t$scope.employee.pagibig = '0123-4567-8901';\r\n\t\t\t$scope.employee.philhealth = '01-234567890-1';\r\n\t\t\t$scope.employee.time_interpretation_id = 1;\r\n\t\t\t$scope.employee.basic_salary = 14000;\r\n\t\t\t$scope.employee.allowance_types = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'allowance_type_id': 1,\r\n\t\t\t\t\t'amount': 100,\r\n\t\t\t\t\t'first_cut_off': 1,\r\n\t\t\t\t\t'second_cut_off': 1,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\r\n\t\t\t$scope.checkDeMinimis($scope.employee.allowance_types[0], true);\r\n\t\t\t$scope.checkFrequency($scope.employee.allowance_types[0], 1);\r\n\t\t\t$scope.checkFrequency($scope.employee.allowance_types[0], 1);\r\n\t\t\t\r\n\t\t\t$scope.employee.deduction_types = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'deduction_type_id': 5,\r\n\t\t\t\t\t'amount': 100,\r\n\t\t\t\t\t'first_cut_off': 1,\r\n\t\t\t\t\t'second_cut_off': 1,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\tHelper.get('/batch')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.batches = data;\r\n\t\t\t\t})\r\n\r\n\t\t\tHelper.get('/branch')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.branches = data;\r\n\t\t\t\t})\r\n\r\n\t\t\tHelper.get('/cost-center')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.cost_centers = data;\r\n\t\t\t\t})\r\n\r\n\t\t\tHelper.get('/position')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.positions = data;\r\n\t\t\t\t})\r\n\r\n\t\t\tHelper.get('/tax-code')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.tax_codes = data;\r\n\t\t\t\t})\r\n\r\n\t\t\tHelper.get('/de-minimis')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.de_minimis = data;\r\n\t\t\t\t\tangular.forEach($scope.de_minimis, function(item){\r\n\t\t\t\t\t\titem.balance = item.maximum_amount_per_month;\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\r\n\t\t\tvar allowance_type_request = {\r\n\t\t\t\t'with': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'de_minimis',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/allowance-type/enlist', allowance_type_request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.allowance_types = data;\r\n\t\t\t\t})\r\n\r\n\t\t\tvar deduction_type_request = {\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'government_deduction',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': false,\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/deduction-type/enlist', deduction_type_request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.deduction_types = data;\r\n\t\t\t\t})\r\n\r\n\t\t\tHelper.get('/time-interpretation')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.time_interpretations = data;\r\n\t\t\t\t})\r\n\r\n\t\t\t$scope.checkCity();\r\n\t\t\t$scope.fetchProvinces();\r\n\r\n\t\t\tvar request = {};\r\n\r\n\t\t\trequest.orderBy = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'employee_number',\r\n\t\t\t\t\t'sort' : 'desc'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\r\n\t\t\trequest.first = true;\r\n\t\t\trequest.withTrashed = true;\r\n\r\n\t\t\tHelper.post('/employee/enlist', request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.last_employee_number = data.employee_number;\r\n\t\t\t\t})\r\n\r\n\t\t\tif($stateParams.employeeID)\r\n\t\t\t{\r\n\t\t\t\tvar request = {}\r\n\r\n\t\t\t\trequest.with = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'allowance_types',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'deduction_types',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'batch',\r\n\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'branch',\r\n\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'cost_center',\r\n\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'position',\r\n\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'city',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'province',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'tax_code',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'time_interpretation',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\r\n\t\t\t\trequest.withTrashed = true;\r\n\r\n\t\t\t\trequest.first = true;\r\n\r\n\t\t\t\tHelper.post('/employee/enlist', request)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.employee = data;\r\n\t\t\t\t\t\t$scope.employee.birthdate = new Date(data.birthdate);\r\n\t\t\t\t\t\t$scope.employee.date_hired = new Date(data.date_hired);\r\n\t\t\t\t\t\t$scope.employee.city = data.city.name;\r\n\t\t\t\t\t\t$scope.employee.province = data.province.name;\r\n\r\n\t\t\t\t\t\t$scope.tin = data.tin.replace(/-/g, '');\r\n\t\t\t\t\t\t$scope.sss = data.sss.replace(/-/g, '');\r\n\t\t\t\t\t\t$scope.pagibig = data.pagibig.replace(/-/g, '');\r\n\t\t\t\t\t\t$scope.philhealth = data.philhealth.replace(/-/g, '');\r\n\r\n\t\t\t\t\t\tangular.forEach($scope.employee.allowance_types, function(item, key){\r\n\t\t\t\t\t\t\t$scope.employee.allowance_types[key] = item.pivot;\r\n\t\t\t\t\t\t\t$scope.checkDeMinimis($scope.employee.allowance_types[key], true);\r\n\r\n\t\t\t\t\t\t\tif($scope.employee.allowance_types[key].first_cut_off){\r\n\t\t\t\t\t\t\t\t$scope.checkFrequency($scope.employee.allowance_types[key], 1)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif($scope.employee.allowance_types[key].second_cut_off){\r\n\t\t\t\t\t\t\t\t$scope.checkFrequency($scope.employee.allowance_types[key], 1)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif($scope.employee.allowance_types[key].third_cut_off){\r\n\t\t\t\t\t\t\t\t$scope.checkFrequency($scope.employee.allowance_types[key], 1)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif($scope.employee.allowance_types[key].fourth_cut_off){\r\n\t\t\t\t\t\t\t\t$scope.checkFrequency($scope.employee.allowance_types[key], 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tangular.forEach($scope.employee.deduction_types, function(item, key){\r\n\t\t\t\t\t\t\t$scope.employee.deduction_types[key] = item.pivot;\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t$scope.toolbar.childState = data.last_name + ', ' + data.first_name;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t$scope.toolbar.childState = 'Employee';\r\n\r\n\t\t\t\t$scope.employee.sex = 'Male';\r\n\r\n\t\t\t\t$scope.employee.date_hired = new Date();\r\n\r\n\t\t\t\t$scope.calculateAge(new Date());\r\n\t\t\t}\r\n\t\t}();\r\n\t}]);","hris\r\n\t.controller('employeeInformationDialogController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\tvar employee = Helper.fetch();\r\n\r\n\t\tvar request = {}\r\n\r\n\t\trequest.with = [\r\n\t\t\t{\r\n\t\t\t\t'relation': 'allowance_types',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'deduction_types',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'batch',\r\n\t\t\t\t'withTrashed': true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'branch',\r\n\t\t\t\t'withTrashed': true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'cost_center',\r\n\t\t\t\t'withTrashed': true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'position',\r\n\t\t\t\t'withTrashed': true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'city',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'province',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'tax_code',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation': 'time_interpretation',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t]\r\n\r\n\t\trequest.where = [\r\n\t\t\t{\r\n\t\t\t\t'label':'id',\r\n\t\t\t\t'condition': '=',\r\n\t\t\t\t'value': employee.id,\r\n\t\t\t}\r\n\t\t]\r\n\r\n\t\trequest.withTrashed = true;\r\n\r\n\t\trequest.first = true;\r\n\r\n\t\tHelper.post('/employee/enlist', request)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.employee = data;\r\n\t\t\t\t$scope.employee.birthdate = new Date(data.birthdate);\r\n\t\t\t\t$scope.employee.date_hired = new Date(data.date_hired);\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tHelper.error();\r\n\t\t\t});\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.edit = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t\t$state.go('main.manage-employee', {'employeeID':$scope.employee.id});\r\n\t\t}\r\n\r\n\t\t$scope.delete = function(){\r\n\t\t\tHelper.stop($scope.employee.id);\r\n\t\t}\t\t\r\n\t}]);","hris\r\n\t.controller('hrisSubheaderController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\t$scope.subheader.menu = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Edit',\r\n\t\t\t\t'icon': 'mdi-pencil',\r\n\t\t\t\t'show':true,\r\n\t\t\t\taction: function(data){\r\n\t\t\t\t\t$state.go('main.manage-employee-information', {'employeeID':data.id});\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Delete',\r\n\t\t\t\t'icon': 'mdi-delete',\r\n\t\t\t\t'show':true,\r\n\t\t\t\taction: function(data){\r\n\t\t\t\t\tvar dialog = {};\r\n\t\t\t\t\tdialog.title = 'Delete';\r\n\t\t\t\t\tdialog.message = 'Delete ' + data.first_name + '?'\r\n\t\t\t\t\tdialog.ok = 'Delete';\r\n\t\t\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\tHelper.delete('/employee/' + data.id)\r\n\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.notify('Employee deleted.');\r\n\t\t\t\t\t\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]\r\n\r\n\t\t$scope.subheader.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Employee Number',\r\n\t\t\t\t'type': 'employee_number',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'First Name',\r\n\t\t\t\t'type': 'first_name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Last Name',\r\n\t\t\t\t'type': 'last_name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Age',\r\n\t\t\t\t'type': 'age',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Birthdate',\r\n\t\t\t\t'type': 'birthdate',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t]\r\n\t}]);","hris\r\n\t.controller('hrisToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'HRIS';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t\t$scope.showInactive = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);","hris\r\n\t.controller('manageEmployeeToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.hideSearchIcon = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t\t$scope.showInactive = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\t}]);"],"sourceRoot":"/source/"}